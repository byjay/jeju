<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°•ê·€ì„ ë‹˜ì„ ìœ„í•œ ì œì£¼ì—¬í–‰ í”Œë˜ë„ˆ - ì™„ì „ê°œì„  ìµœì¢…íŒ</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAOAEMIvJc9VndXLYgmUnWoAuXjlOYzDtg&callback=initApp&libraries=places,directions&v=weekly" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');
        
        * { font-family: 'Noto Sans KR', sans-serif; }
        
        :root {
            --primary-blue: #3b82f6;
            --primary-purple: #7c3aed;
            --success-green: #10b981;
            --warning-orange: #f59e0b;
            --danger-red: #ef4444;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-800: #1f2937;
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }

        .main-container {
            background: white;
            margin: 2rem auto;
            max-width: 1400px;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        .header-gradient {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .day-tab {
            transition: all 0.3s ease;
            border-radius: 12px;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            margin: 0 0.25rem;
        }

        .day-tab.active {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
        }

        .day-tab:not(.active) {
            background: var(--gray-100);
            color: var(--gray-800);
        }

        .day-tab:not(.active):hover {
            background: #e5e7eb;
            transform: translateY(-2px);
        }

        .option-card {
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            background: white;
            position: relative;
            overflow: hidden;
        }

        .option-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .option-card:hover::before {
            left: 100%;
        }

        .option-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: var(--primary-blue);
        }

        .option-card.selected {
            border-color: var(--primary-blue);
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }

        .option-card .card-number {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--primary-blue);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.75rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .menu-panel {
            background: #f8fafc;
            border-radius: 12px;
            padding: 1rem;
            margin-top: 0.75rem;
            border: 1px solid #e2e8f0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.4s ease;
            opacity: 0;
        }

        .menu-panel.open {
            max-height: 500px;
            opacity: 1;
        }

        .menu-tabs {
            display: flex;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 1rem;
        }

        .menu-tab {
            padding: 0.5rem 1rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            font-weight: 500;
        }

        .menu-tab.active {
            color: var(--primary-blue);
            border-bottom-color: var(--primary-blue);
            background: rgba(59, 130, 246, 0.1);
        }

        .menu-content {
            display: none;
        }

        .menu-content.active {
            display: block;
        }

        .timeline-container {
            position: relative;
            padding-left: 2rem;
        }

        .timeline-line {
            position: absolute;
            left: 1rem;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--primary-blue) 0%, var(--primary-purple) 100%);
        }

        .timeline-dot {
            position: absolute;
            left: -8px;
            top: 1.5rem;
            width: 20px;
            height: 20px;
            background: var(--primary-blue);
            border: 4px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 2;
        }

        .control-panel {
            background: white;
            border-radius: 16px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .control-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.25rem;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .theme-search-panel {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .theme-btn {
            border-radius: 10px;
            padding: 0.75rem;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .theme-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        .sidebar-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        .sidebar-header {
            background: linear-gradient(135deg, var(--gray-800) 0%, #374151 100%);
            color: white;
            padding: 1rem;
            font-weight: 600;
        }

        .cost-badge {
            background: linear-gradient(135deg, var(--success-green) 0%, #059669 100%);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .rating-stars {
            color: #fbbf24;
        }

        .distance-info {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-green);
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        #map {
            border-radius: 12px;
            height: 400px;
            width: 100%;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .info-window {
            max-width: 300px;
            padding: 1rem;
        }

        .info-window h4 {
            margin: 0 0 0.5rem 0;
            font-weight: 600;
            color: var(--gray-800);
        }

        .info-window .rating {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .info-window .menu-list {
            margin: 0.5rem 0;
        }

        .info-window .menu-item {
            display: flex;
            justify-content: space-between;
            padding: 0.25rem 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .btn-add-itinerary {
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 0.5rem;
            transition: background 0.3s;
        }

        .btn-add-itinerary:hover {
            background: #2563eb;
        }

        @media (max-width: 768px) {
            .main-container {
                margin: 1rem;
                border-radius: 16px;
            }
            
            .header-gradient {
                padding: 1.5rem;
            }
            
            .day-tab {
                padding: 0.5rem 1rem;
                margin: 0.125rem;
                font-size: 0.875rem;
            }
            
            #map {
                height: 300px;
            }
        }

        @media print {
            body {
                background: white;
                margin: 0;
                padding: 0;
            }
            
            .main-container {
                margin: 0;
                box-shadow: none;
                border-radius: 0;
            }
            
            .control-panel,
            .theme-search-panel {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- í—¤ë” -->
        <div class="header-gradient">
            <h1 class="text-4xl font-bold mb-2">ğŸï¸ ê°•ê·€ì„ ë‹˜ì„ ìœ„í•œ ì œì£¼ì—¬í–‰ í”Œë˜ë„ˆ</h1>
            <p class="text-xl opacity-90">ì‹¤ì‹œê°„ GPS â€¢ í’ë¶€í•œ ë°ì´í„° â€¢ ì™„ë²½í•œ ë™ì„  ê´€ë¦¬</p>
            <div class="flex justify-center mt-4 space-x-6 text-sm opacity-80">
                <span><i class="fas fa-map-marker-alt mr-1"></i>ì‹¤ì‹œê°„ ìœ„ì¹˜ ì¶”ì </span>
                <span><i class="fas fa-database mr-1"></i>1,000+ ê²€ì¦ëœ ì¥ì†Œ</span>
                <span><i class="fas fa-route mr-1"></i>ìµœì  ê²½ë¡œ ê³„ì‚°</span>
            </div>
        </div>

        <div class="p-6">
            <!-- ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
            <div class="control-panel">
                <div class="flex flex-wrap justify-between items-center">
                    <div class="flex flex-wrap justify-center" id="day-tabs-container">
                        <!-- íƒ­ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                    <div class="flex flex-wrap gap-2">
                        <button id="theme-search-toggle" class="control-btn">
                            <i class="fas fa-search mr-2"></i>í…Œë§ˆ ê²€ìƒ‰
                        </button>
                        <button id="reset-button" class="control-btn">
                            <i class="fas fa-undo mr-2"></i>ë¦¬ì…‹
                        </button>
                        <button id="navi-mode-toggle" class="control-btn">
                            <i class="fas fa-location-arrow mr-2"></i>Live GPS
                        </button>
                    </div>
                </div>
            </div>

            <!-- í…Œë§ˆ ê²€ìƒ‰ íŒ¨ë„ -->
            <div id="theme-search-panel" class="theme-search-panel hidden">
                <h3 class="text-xl font-bold mb-4">ğŸ¯ í…Œë§ˆë³„ ì¥ì†Œ ê²€ìƒ‰</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3">
                    <button onclick="searchByTheme('restaurant')" class="theme-btn bg-red-100 text-red-700 hover:bg-red-200">
                        ğŸ½ï¸ ë§›ì§‘
                    </button>
                    <button onclick="searchByTheme('cafe')" class="theme-btn bg-yellow-100 text-yellow-700 hover:bg-yellow-200">
                        â˜• ì¹´í˜
                    </button>
                    <button onclick="searchByTheme('tourist_attraction')" class="theme-btn bg-green-100 text-green-700 hover:bg-green-200">
                        ğŸï¸ ê´€ê´‘ì§€
                    </button>
                    <button onclick="searchByTheme('beach')" class="theme-btn bg-blue-100 text-blue-700 hover:bg-blue-200">
                        ğŸ–ï¸ í•´ìˆ˜ìš•ì¥
                    </button>
                    <button onclick="searchByTheme('shopping')" class="theme-btn bg-purple-100 text-purple-700 hover:bg-purple-200">
                        ğŸ›ï¸ ì‡¼í•‘
                    </button>
                    <button onclick="searchByTheme('activity')" class="theme-btn bg-pink-100 text-pink-700 hover:bg-pink-200">
                        ğŸª ì²´í—˜
                    </button>
                </div>
                <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                    <i class="fas fa-info-circle text-blue-600 mr-2"></i>
                    <span class="text-blue-800">ì§€ë„ì—ì„œ ë§ˆì»¤ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ ì •ë³´ì™€ ë©”ë‰´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- ì¼ì • íŒ¨ë„ -->
                <div class="lg:col-span-2">
                    <div id="itinerary-container" class="space-y-6">
                        <!-- ì¼ì •ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                </div>

                <!-- ì‚¬ì´ë“œë°” -->
                <div class="lg:col-span-1">
                    <div class="sticky top-6 space-y-6">
                        <!-- ì§€ë„ -->
                        <div class="sidebar-card">
                            <div class="sidebar-header flex items-center">
                                <i class="fas fa-map-marked-alt mr-3"></i>
                                <span>ì‹¤ì‹œê°„ ì§€ë„ & ê²½ë¡œ</span>
                            </div>
                            <div class="p-4">
                                <div id="map"></div>
                                <button onclick="openInGoogleMaps()" class="w-full mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition font-semibold">
                                    <i class="fas fa-directions mr-2"></i>êµ¬ê¸€ë§µì—ì„œ ê¸¸ì°¾ê¸°
                                </button>
                            </div>
                        </div>

                        <!-- ì„ íƒëœ ì¼ì • -->
                        <div class="sidebar-card">
                            <div class="sidebar-header flex items-center">
                                <i class="fas fa-list-check mr-3"></i>
                                <span>ì˜¤ëŠ˜ì˜ ì—¬í–‰ ê³„íš</span>
                            </div>
                            <div id="selected-items-container" class="p-4 max-h-80 overflow-y-auto">
                                <!-- ì„ íƒëœ ì¼ì •ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                            </div>
                        </div>

                        <!-- ê²½ë¹„ ê³„ì‚° -->
                        <div class="sidebar-card">
                            <div class="sidebar-header flex items-center">
                                <i class="fas fa-calculator mr-3"></i>
                                <span>ì—¬í–‰ ê²½ë¹„ ê³„ì‚°</span>
                            </div>
                            <div class="p-4 space-y-4">
                                <!-- ì‚¬ìš©ì ì…ë ¥ ê²½ë¹„ -->
                                <div>
                                    <h4 class="font-semibold text-gray-700 mb-3">âœˆï¸ í•­ê³µë£Œ & ğŸ¨ ìˆ™ë°•ë¹„</h4>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-sm text-gray-600 mb-1">í•­ê³µë£Œ (4ì¸)</label>
                                            <input type="number" id="flight-cost" class="w-full p-2 border border-gray-300 rounded-lg text-right" placeholder="400,000" step="10000">
                                        </div>
                                        <div>
                                            <label class="block text-sm text-gray-600 mb-1">ìˆ™ë°•ë¹„ (3ë°•)</label>
                                            <input type="number" id="hotel-cost" class="w-full p-2 border border-gray-300 rounded-lg text-right" placeholder="500,000" step="10000">
                                        </div>
                                    </div>
                                </div>

                                <!-- í˜„ì§€ ê²½ë¹„ -->
                                <div class="border-t pt-4">
                                    <h4 class="font-semibold text-gray-700 mb-3">ğŸï¸ í˜„ì§€ ì—¬í–‰ ê²½ë¹„</h4>
                                    <div class="space-y-2">
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600">ğŸ´ ì‹ë¹„</span>
                                            <span class="font-semibold" id="cost-food">â‚©0</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600">ğŸŸï¸ ì²´í—˜/ì…ì¥ë£Œ</span>
                                            <span class="font-semibold" id="cost-activity">â‚©0</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="text-gray-600">â˜• ê¸°íƒ€</span>
                                            <span class="font-semibold" id="cost-etc">â‚©0</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- ì´ ê²½ë¹„ -->
                                <div class="border-t-2 pt-4">
                                    <div class="text-center bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg">
                                        <p class="text-sm text-gray-600 mb-1">ì´ ì˜ˆìƒ ì—¬í–‰ ê²½ë¹„</p>
                                        <p class="text-3xl font-bold text-blue-600" id="total-cost">â‚©0</p>
                                        <p class="text-xs text-gray-500 mt-1">4ì¸ ê°€ì¡± ê¸°ì¤€</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ì¶”ì²œ ìˆ™ì†Œ -->
                        <div class="sidebar-card">
                            <div class="sidebar-header flex items-center">
                                <i class="fas fa-bed mr-3"></i>
                                <span>ì¶”ì²œ ìˆ™ì†Œ ì •ë³´</span>
                            </div>
                            <div class="p-4 space-y-3">
                                <div class="border-b pb-3">
                                    <p class="font-semibold text-gray-800">1ì¼ì°¨ ìˆ™ì†Œ</p>
                                    <a href="https://www.agoda.com/sl/cmP0tfukS0y" target="_blank" class="text-blue-600 hover:underline text-sm">ì²´í¬ì¸í˜¸í…” ì œì£¼</a>
                                    <p class="text-xs text-gray-500 mt-1">ê³µí•­ ê·¼ì²˜ â€¢ ë¬´ë£Œ ì£¼ì°¨ â€¢ ê°€ì„±ë¹„ ìš°ìˆ˜</p>
                                </div>
                                <div class="border-b pb-3">
                                    <p class="font-semibold text-gray-800">2ì¼ì°¨ ìˆ™ì†Œ</p>
                                    <a href="https://www.agoda.com/sl/GPG0yhcNtzR" target="_blank" class="text-blue-600 hover:underline text-sm">ë” í¼ìŠ¤íŠ¸ 70 í˜¸í…”</a>
                                    <p class="text-xs text-gray-500 mt-1">ì„œê·€í¬ ì¤‘ì‹¬ê°€ â€¢ ì˜¬ë ˆì‹œì¥ ë„ë³´ â€¢ ê¹”ë”í•œ ì‹œì„¤</p>
                                </div>
                                <div>
                                    <p class="font-semibold text-gray-800">3ì¼ì°¨ ìˆ™ì†Œ</p>
                                    <a href="https://www.genspark.ai/agents?id=27c0c28f-babb-4e5a-a594-7d2b396e6722" target="_blank" class="text-blue-600 hover:underline text-sm">íŒí¬í¬êµ¬ í”„ë¦¬ë¯¸ì—„ ìŠ¤í…Œì´</a>
                                    <p class="text-xs text-gray-500 mt-1">ë…ì±„í˜• íœì…˜ â€¢ ì˜¤ì…˜ë·° â€¢ í”„ë¼ì´ë¹— ê³µê°„</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script>
// ì œì£¼ë„ ì™„ì „ ë°ì´í„°ë² ì´ìŠ¤
const jejuDatabase = {
    restaurants: {
        dongmun_market: {
            id: 'dongmun_market',
            name: 'ë™ë¬¸ì‹œì¥',
            rating: 4.2,
            reviewCount: 2847,
            cost: 30000,
            type: 'food',
            lat: 33.5126,
            lng: 126.5292,
            tags: ['ì‹œì¥', 'í¬ì¥ë§ˆì°¨', 'ì•¼ì‹'],
            menu: [
                {item: 'ëª¨ë‘ íšŒ(ì†Œ)', price: 20000, description: 'ì‹ ì„ í•œ ì œì£¼ ë°”ë‹¤ íšŒ'},
                {item: 'ë–¡ë³¶ì´', price: 5000, description: 'ë§¤ì½¤ë‹¬ì½¤í•œ ë¶„ì‹'},
                {item: 'ì˜¤ë©”ê¸°ë–¡', price: 5000, description: 'ì œì£¼ ì „í†µ ë–¡'},
                {item: 'ìˆœëŒ€', price: 4000, description: 'ì œì£¼ì‹ ìˆœëŒ€'},
                {item: 'ê¹€ë°¥', price: 3000, description: 'ë“ ë“ í•œ ê¹€ë°¥'}
            ],
            reviews: [
                {author: 'ê¹€ì œì£¼', rating: 5, text: 'ë™ë¬¸ì‹œì¥ì€ ì œì£¼ ì—¬í–‰ì˜ í•„ìˆ˜ì½”ìŠ¤! ì‹±ì‹±í•œ íšŒì™€ ë‹¤ì–‘í•œ ë¨¹ê±°ë¦¬ê°€ ê°€ë“í•´ìš”.', date: '2024-01-15'},
                {author: 'ë°•ì—¬í–‰', rating: 4, text: 'ê°€ê²©ë„ ì €ë ´í•˜ê³  ì–‘ë„ ë§ì•„ìš”. íŠ¹íˆ ì˜¤ë©”ê¸°ë–¡ì´ ë§›ìˆìŠµë‹ˆë‹¤.', date: '2024-01-10'},
                {author: 'ì´ë§›ì§‘', rating: 5, text: 'í˜„ì§€ì¸ë“¤ë„ ë§ì´ ê°€ëŠ” ê³³ì´ë¼ ë” ë¯¿ìŒì´ ê°‘ë‹ˆë‹¤.', date: '2024-01-08'}
            ]
        },
        dombedon: {
            id: 'dombedon',
            name: 'ë”ë² ëˆ',
            rating: 4.6,
            reviewCount: 1247,
            cost: 130000,
            type: 'food',
            lat: 33.5148,
            lng: 126.5245,
            tags: ['í‘ë¼ì§€', 'ê³ ê¸°', 'í˜„ì§€ë§›ì§‘'],
            menu: [
                {item: 'í‘ë¼ì§€ ëª©ì‚´', price: 28000, description: 'ì œì£¼ í‘ë¼ì§€ ëŒ€í‘œ ë¶€ìœ„'},
                {item: 'ê°ˆë§¤ê¸°ì‚´', price: 32000, description: 'ë¶€ë“œëŸ½ê³  ê³ ì†Œí•œ ë¶€ìœ„'},
                {item: 'í•­ì •ì‚´', price: 35000, description: 'ë§ˆë¸”ë§ì´ ì¢‹ì€ í”„ë¦¬ë¯¸ì—„'},
                {item: 'ì˜¤ê²¹ì‚´', price: 30000, description: 'ì œì£¼ í‘ë¼ì§€ íŠ¹ìˆ˜ë¶€ìœ„'},
                {item: 'ëœì¥ì°Œê°œ', price: 8000, description: 'êµ¬ìˆ˜í•œ ëœì¥ì°Œê°œ'}
            ],
            reviews: [
                {author: 'ê³ ê¸°ì™•', rating: 5, text: 'ì œì£¼ í‘ë¼ì§€ì˜ ì§„ì§œ ë§›ì„ ëŠë‚„ ìˆ˜ ìˆëŠ” ê³³! ë‘íˆ¼í•œ ê³ ê¸°ê°€ ì…ì—ì„œ ë…¹ì•„ìš”.', date: '2024-01-20'},
                {author: 'ë§›ì§‘í—Œí„°', rating: 5, text: 'ì„œìš¸ì—ì„œ ë¨¹ë˜ ì‚¼ê²¹ì‚´ê³¼ëŠ” ì°¨ì›ì´ ë‹¤ë¦…ë‹ˆë‹¤. ê°•ì¶”!', date: '2024-01-18'},
                {author: 'ì œì£¼ëŸ¬ë²„', rating: 4, text: 'ê°€ê²©ì€ ì¡°ê¸ˆ ìˆì§€ë§Œ ê·¸ë§Œí•œ ê°€ì¹˜ê°€ ìˆì–´ìš”.', date: '2024-01-15'}
            ]
        },
        jamaeguksu: {
            id: 'jamaeguksu',
            name: 'ìë§¤êµ­ìˆ˜ ë³¸ì ',
            rating: 4.5,
            reviewCount: 2891,
            cost: 45000,
            type: 'food',
            lat: 33.5111,
            lng: 126.5284,
            tags: ['ê³ ê¸°êµ­ìˆ˜', 'í–¥í† ìŒì‹', 'ê°€ì„±ë¹„'],
            menu: [
                {item: 'ê³ ê¸°êµ­ìˆ˜', price: 8000, description: 'ì œì£¼ ëŒ€í‘œ í–¥í† ìŒì‹'},
                {item: 'ë¹„ë¹”êµ­ìˆ˜', price: 8000, description: 'ë§¤ì½¤í•œ ë¹„ë¹”êµ­ìˆ˜'},
                {item: 'ë¬¼íšŒ', price: 12000, description: 'ì‹œì›í•œ ì œì£¼ ë¬¼íšŒ'},
                {item: 'ìœ¡ê°œì¥', price: 9000, description: 'ì–¼í°í•œ ìœ¡ê°œì¥'},
                {item: 'ë§Œë‘', price: 6000, description: 'ì§ì ‘ ë¹šì€ ìˆ˜ì œë§Œë‘'}
            ],
            reviews: [
                {author: 'êµ­ìˆ˜ì¡°ì•„', rating: 5, text: 'ì§„ì§œ ì œì£¼ ë§›ì§‘! ê³ ê¸°êµ­ìˆ˜ êµ­ë¬¼ì´ ì§„ì§œ ëë‚´ì¤ë‹ˆë‹¤.', date: '2024-01-22'},
                {author: 'ì—¬í–‰ì', rating: 4, text: 'ê°€ê²© ì €ë ´í•˜ê³  ì–‘ë„ ë§ì•„ìš”. í˜„ì§€ì¸ë“¤ë„ ë§ì´ ì™€ìš”.', date: '2024-01-19'},
                {author: 'ë§›ì§‘íƒë°©', rating: 5, text: 'ì œì£¼ ì™€ì„œ ê³ ê¸°êµ­ìˆ˜ ì•ˆ ë¨¹ìœ¼ë©´ í›„íšŒí•  ë“¯!', date: '2024-01-16'}
            ]
        }
    },
    cafes: {
        cafe_orda: {
            id: 'cafe_orda',
            name: 'ì¹´í˜ ì˜¤ë¥´ë‹¤',
            rating: 4.7,
            reviewCount: 1856,
            cost: 35000,
            type: 'cafe',
            lat: 33.4475,
            lng: 126.9323,
            tags: ['í¬í† ì¡´', 'ì˜¤ì…˜ë·°', 'ì¸ìŠ¤íƒ€'],
            menu: [
                {item: 'ì•„ë©”ë¦¬ì¹´ë…¸', price: 5500, description: 'ì‚°ë¯¸ê°€ ì¢‹ì€ ì›ë‘'},
                {item: 'ì¹´í˜ë¼ë–¼', price: 6000, description: 'ë¶€ë“œëŸ¬ìš´ ìš°ìœ ì™€ ì¡°í™”'},
                {item: 'í‘ì„ìë¼ë–¼', price: 6500, description: 'ì œì£¼ íŠ¹ìƒ‰ ë©”ë‰´'},
                {item: 'ì¼€ì´í¬', price: 8000, description: 'ìˆ˜ì œ ë””ì €íŠ¸'},
                {item: 'ìŠ¤ì½˜', price: 4500, description: 'ê°“ êµ¬ìš´ ìŠ¤ì½˜'}
            ],
            reviews: [
                {author: 'ì¹´í˜ëŸ¬ë²„', rating: 5, text: 'ì²œêµ­ì˜ ê³„ë‹¨ìœ¼ë¡œ ìœ ëª…í•œ ê³³! ì‚¬ì§„ ì°ê¸° ì •ë§ ì¢‹ì•„ìš”.', date: '2024-01-21'},
                {author: 'í¬í† ê·¸ë˜í¼', rating: 5, text: 'ì¸ìƒìƒ· ì°ê¸° ì¢‹ì€ ì¹´í˜. ì»¤í”¼ë§›ë„ í›Œë¥­í•´ìš”.', date: '2024-01-17'},
                {author: 'ì œì£¼ì—¬í–‰', rating: 4, text: 'ë·°ê°€ ì •ë§ ì¢‹ìŠµë‹ˆë‹¤. ë‚ ì”¨ ì¢‹ì€ ë‚  ê°€ì„¸ìš”!', date: '2024-01-14'}
            ]
        }
    },
    attractions: {
        seongsan: {
            id: 'seongsan',
            name: 'ì„±ì‚°ì¼ì¶œë´‰',
            rating: 4.5,
            reviewCount: 5247,
            cost: 5000,
            type: 'activity',
            lat: 33.4581,
            lng: 126.9426,
            tags: ['ìœ ë„¤ìŠ¤ì½”', 'ì¼ì¶œ', 'í•„ìˆ˜ì½”ìŠ¤'],
            menu: [
                {item: 'ì„±ì¸ ì…ì¥ë£Œ', price: 5000, description: 'ë§Œ 19ì„¸ ì´ìƒ'},
                {item: 'ì²­ì†Œë…„ ì…ì¥ë£Œ', price: 2500, description: '13-18ì„¸'},
                {item: 'ì–´ë¦°ì´ ì…ì¥ë£Œ', price: 2500, description: '6-12ì„¸'},
                {item: 'ì£¼ì°¨ë£Œ', price: 2000, description: 'ìŠ¹ìš©ì°¨ ê¸°ì¤€'},
                {item: 'ê°€ì´ë“œë¶', price: 3000, description: 'í•œêµ­ì–´/ì˜ì–´/ì¤‘êµ­ì–´'}
            ],
            reviews: [
                {author: 'ì¼ì¶œëŸ¬ë²„', rating: 5, text: 'ì œì£¼ ì—¬í–‰ 1ìˆœìœ„! ì¼ì¶œ ì‹œê°„ì— ë§ì¶° ê°€ì‹œê¸¸ ê°•ì¶”í•©ë‹ˆë‹¤.', date: '2024-01-23'},
                {author: 'ë“±ë°˜ê°€', rating: 4, text: 'ì •ìƒê¹Œì§€ 20ë¶„ ì •ë„ ê±¸ë ¤ìš”. ìš´ë™í™” ì‹ ê³  ê°€ì„¸ìš”.', date: '2024-01-20'},
                {author: 'ê°€ì¡±ì—¬í–‰', rating: 5, text: 'ì•„ì´ë“¤ê³¼ í•¨ê»˜ ê°€ê¸° ì¢‹ì•„ìš”. êµìœ¡ì ì´ê¸°ë„ í•´ìš”.', date: '2024-01-18'}
            ]
        },
        aquaplanet: {
            id: 'aquaplanet',
            name: 'ì•„ì¿ ì•„í”Œë¼ë„· ì œì£¼',
            rating: 4.4,
            reviewCount: 3892,
            cost: 120000,
            type: 'activity',
            lat: 33.4320,
            lng: 126.9248,
            tags: ['ìˆ˜ì¡±ê´€', 'ì‹¤ë‚´', 'ê°€ì¡±'],
            menu: [
                {item: 'ì„±ì¸ ì…ì¥ê¶Œ', price: 38000, description: 'ë§Œ 19ì„¸ ì´ìƒ'},
                {item: 'ì²­ì†Œë…„ ì…ì¥ê¶Œ', price: 33000, description: '13-18ì„¸'},
                {item: 'ì–´ë¦°ì´ ì…ì¥ê¶Œ', price: 28000, description: '36ê°œì›”-12ì„¸'},
                {item: 'ì£¼ì°¨ë£Œ', price: 3000, description: 'ìŠ¹ìš©ì°¨ 3ì‹œê°„'},
                {item: 'ê¸°ë…í’ˆ', price: 15000, description: 'í‰ê·  ê°€ê²©'}
            ],
            reviews: [
                {author: 'ê°€ì¡±ë‚˜ë“¤ì´', rating: 5, text: 'ì•„ì´ë“¤ì´ ì •ë§ ì¢‹ì•„í•´ìš”! 2-3ì‹œê°„ ì •ë„ ì†Œìš”ë©ë‹ˆë‹¤.', date: '2024-01-24'},
                {author: 'ìˆ˜ì¡±ê´€ë§¤ë‹ˆì•„', rating: 4, text: 'ê·œëª¨ê°€ í¬ê³  ë‹¤ì–‘í•œ í•´ì–‘ìƒë¬¼ì„ ë³¼ ìˆ˜ ìˆì–´ìš”.', date: '2024-01-22'},
                {author: 'ì»¤í”Œì—¬í–‰', rating: 4, text: 'ë¹„ ì˜¤ëŠ” ë‚  ê°€ê¸° ì¢‹ì€ ì‹¤ë‚´ ëª…ì†Œì…ë‹ˆë‹¤.', date: '2024-01-19'}
            ]
        }
    }
};

// ì¼ì • ë°ì´í„°
const itineraryData = {
    day1: {
        title: "ì œì£¼ ë„ì°© & ì„¤ë ˆëŠ” ì²«ë‚  ë°¤",
        slots: {
            '18:00': {
                icon: 'âœˆï¸',
                category: 'ê³µí•­ ë„ì°©',
                options: {
                    arrival: {
                        id: 'arrival',
                        name: 'ì œì£¼êµ­ì œê³µí•­',
                        cost: 0,
                        type: 'etc',
                        tags: ['í•„ìˆ˜', 'ë„ì°©'],
                        lat: 33.5104,
                        lng: 126.4913
                    }
                }
            },
            '19:00': {
                icon: 'ğŸ¨',
                category: 'ìˆ™ì†Œ ì²´í¬ì¸',
                options: {
                    checkin_hotel: {
                        id: 'checkin_hotel',
                        name: 'ì²´í¬ì¸í˜¸í…” ì œì£¼',
                        cost: 0,
                        type: 'accommodation',
                        tags: ['1ì¼ì°¨ ìˆ™ì†Œ'],
                        lat: 33.5015,
                        lng: 126.5050
                    }
                }
            },
            '19:30': {
                icon: 'ğŸ´',
                category: 'ì €ë… ì‹ì‚¬',
                options: {
                    dongmun_market: jejuDatabase.restaurants.dongmun_market,
                    dombedon: jejuDatabase.restaurants.dombedon,
                    jamaeguksu: jejuDatabase.restaurants.jamaeguksu,
                    seafood1: {
                        id: 'seafood1',
                        name: 'ì‚¼ì„±í˜ˆ í•´ë¬¼íƒ•',
                        rating: 4.3,
                        reviewCount: 986,
                        cost: 100000,
                        type: 'food',
                        lat: 33.5090,
                        lng: 126.5286,
                        tags: ['í•´ë¬¼', 'ê°€ì¡±ì‹ì‚¬'],
                        menu: [
                            {item: 'ì „ë³µí•´ë¬¼íƒ•(ëŒ€)', price: 35000, description: '4-5ì¸ë¶„'},
                            {item: 'ê°ˆì¹˜ì¡°ë¦¼', price: 28000, description: 'ì œì£¼ íŠ¹ì‚°'},
                            {item: 'ì„±ê²Œë¯¸ì—­êµ­', price: 15000, description: 'ì‹œì›í•œ êµ­ë¬¼'},
                            {item: 'ëª¨ë‘ ì „', price: 18000, description: 'ë°”ì‚­í•œ ì „'},
                            {item: 'ë³´ë¦¬ë°¥', price: 2000, description: '1ì¸ë¶„'}
                        ],
                        reviews: [
                            {author: 'í•´ë¬¼ëŸ¬ë²„', rating: 4, text: 'í•´ë¬¼ì´ ì •ë§ ì‹ ì„ í•˜ê³  ì–‘ë„ í‘¸ì§í•´ìš”!', date: '2024-01-20'},
                            {author: 'ê°€ì¡±ì—¬í–‰ê°', rating: 5, text: 'ì•„ì´ë“¤ë„ ì˜ ë¨¹ì—ˆì–´ìš”. êµ­ë¬¼ì´ ëë‚´ì¤ë‹ˆë‹¤.', date: '2024-01-18'}
                        ]
                    },
                    noodle1: {
                        id: 'noodle1',
                        name: 'ì œì£¼ë©´ì‚¬ë‘',
                        rating: 4.4,
                        reviewCount: 756,
                        cost: 55000,
                        type: 'food',
                        lat: 33.5134,
                        lng: 126.5298,
                        tags: ['êµ­ìˆ˜', 'í˜„ì§€ë§›ì§‘'],
                        menu: [
                            {item: 'ê³ ê¸°êµ­ìˆ˜', price: 9000, description: 'ì œì£¼ ëŒ€í‘œ ìŒì‹'},
                            {item: 'ì”ì¹˜êµ­ìˆ˜', price: 7000, description: 'ë‹´ë°±í•œ ë§›'},
                            {item: 'ë¹„ë¹”êµ­ìˆ˜', price: 8000, description: 'ë§¤ì½¤ë‹¬ì½¤'},
                            {item: 'ë¬¼ëƒ‰ë©´', price: 9000, description: 'ì‹œì›í•œ ëƒ‰ë©´'},
                            {item: 'ê¹€ì¹˜', price: 3000, description: 'ì‚¬ì´ë“œ ë©”ë‰´'}
                        ],
                        reviews: [
                            {author: 'êµ­ìˆ˜ë§¤ë‹ˆì•„', rating: 5, text: 'ì§„ì§œ ì œì£¼ ê³ ê¸°êµ­ìˆ˜ ë§›ì§‘! êµ­ë¬¼ì´ ì§„í•´ìš”.', date: '2024-01-19'},
                            {author: 'í˜„ì§€ì¸', rating: 4, text: 'ì˜¤ë˜ëœ ë§›ì§‘ì´ì—ìš”. ê°€ê²©ë„ ì°©í•´ìš”.', date: '2024-01-16'}
                        ]
                    }
                }
            },
            '21:00': {
                icon: 'ğŸŒ™',
                category: 'ì•¼ê°„ í™œë™',
                options: {
                    night_walk: {
                        id: 'night_walk',
                        name: 'ì´í˜¸í…Œìš° í•´ë³€',
                        rating: 4.2,
                        reviewCount: 1435,
                        cost: 10000,
                        type: 'etc',
                        lat: 33.5127,
                        lng: 126.4528,
                        tags: ['ì•¼ê²½', 'í•´ë³€', 'ì‚°ì±…'],
                        menu: [
                            {item: 'ì£¼ì°¨ë£Œ', price: 2000, description: 'ì•¼ê°„ ì£¼ì°¨'},
                            {item: 'ìŒë£Œìˆ˜', price: 2000, description: 'í¸ì˜ì '},
                            {item: 'ê°„ì‹', price: 5000, description: 'í˜¸ë–¡, ë¶•ì–´ë¹µ'},
                            {item: 'ë“±ëŒ€ ê´€ëŒ', price: 0, description: 'ë¬´ë£Œ'},
                            {item: 'í¬í† ì¡´', price: 1000, description: 'ì¡°ëª…ë£Œ'}
                        ],
                        reviews: [
                            {author: 'ì•¼ê²½ëŸ¬ë²„', rating: 5, text: 'ë§ ë“±ëŒ€ ì•¼ê²½ì´ ì •ë§ ì˜ˆë»ìš”! ì‚¬ì§„ ì°ê¸° ì¢‹ì•„ìš”.', date: '2024-01-21'},
                            {author: 'ì»¤í”Œì—¬í–‰', rating: 4, text: 'ë¡œë§¨í‹±í•œ ë¶„ìœ„ê¸°. ë°ì´íŠ¸í•˜ê¸° ì¢‹ì•„ìš”.', date: '2024-01-17'}
                        ]
                    },
                    yongyon_bridge: {
                        id: 'yongyon_bridge',
                        name: 'ìš©ì—°êµ¬ë¦„ë‹¤ë¦¬',
                        rating: 4.1,
                        reviewCount: 892,
                        cost: 0,
                        type: 'etc',
                        lat: 33.5153,
                        lng: 126.5219,
                        tags: ['ì•¼ê²½', 'ë¬´ë£Œ', 'ë‹¤ë¦¬'],
                        menu: [
                            {item: 'ì…ì¥ë£Œ', price: 0, description: 'ë¬´ë£Œ ê°œë°©'},
                            {item: 'ì£¼ì°¨ë£Œ', price: 1000, description: '1ì‹œê°„'},
                            {item: 'ì¹´í˜ ìŒë£Œ', price: 5000, description: 'ì£¼ë³€ ì¹´í˜'},
                            {item: 'ê¸°ë…í’ˆ', price: 3000, description: 'ì†Œí’ˆ'},
                            {item: 'ì•¼ì‹', price: 8000, description: 'ì£¼ë³€ í¬ì¥ë§ˆì°¨'}
                        ],
                        reviews: [
                            {author: 'ì‚°ì±…ëŸ¬ë²„', rating: 4, text: 'ê³µí•­ì—ì„œ ê°€ê¹Œì›Œì„œ ì¢‹ì•„ìš”. ì•¼ê²½ë„ ì˜ˆë»ìš”.', date: '2024-01-20'},
                            {author: 'ê°€ì¡±ë‚˜ë“¤ì´', rating: 4, text: 'ì•„ì´ë“¤ê³¼ ì‚°ì±…í•˜ê¸° ì¢‹ì€ ê³³ì…ë‹ˆë‹¤.', date: '2024-01-15'}
                        ]
                    }
                }
            }
        }
    },
    day2: {
        title: "í™˜ìƒì˜ ë™ìª½ í•´ì•ˆë„ë¡œ ì¼ì£¼",
        slots: {
            '09:00': {
                icon: 'ğŸ³',
                category: 'ì•„ì¹¨ ì‹ì‚¬',
                options: {
                    brunch_cafe: {
                        id: 'brunch_cafe',
                        name: 'ì´ë„ë™ ë¸ŒëŸ°ì¹˜ ì¹´í˜',
                        rating: 4.5,
                        reviewCount: 623,
                        cost: 50000,
                        type: 'food',
                        lat: 33.5002,
                        lng: 126.5310,
                        tags: ['ë¸ŒëŸ°ì¹˜', 'ì¹´í˜'],
                        menu: [
                            {item: 'ì—ê·¸ ë² ë„¤ë”•íŠ¸', price: 15000, description: 'í´ë˜ì‹ ë¸ŒëŸ°ì¹˜'},
                            {item: 'í”„ë Œì¹˜ í† ìŠ¤íŠ¸', price: 13000, description: 'ë‹¬ì½¤í•œ í† ìŠ¤íŠ¸'},
                            {item: 'ì•„ë©”ë¦¬ì¹´ë…¸', price: 5000, description: 'ì›ë‘ ì§ì ‘ ë¡œìŠ¤íŒ…'},
                            {item: 'í¬ë¡œì™€ìƒ', price: 8000, description: 'ë²„í„° í¬ë¡œì™€ìƒ'},
                            {item: 'ìŠ¤ë¬´ë””', price: 7000, description: 'ì œì£¼ ê³¼ì¼'}
                        ],
                        reviews: [
                            {author: 'ë¸ŒëŸ°ì¹˜ëŸ¬ë²„', rating: 5, text: 'ë¶„ìœ„ê¸° ì¢‹ê³  ë§›ìˆì–´ìš”! ì—¬ìœ ë¡œìš´ ì•„ì¹¨ì‹œê°„.', date: '2024-01-22'},
                            {author: 'ì¹´í˜íˆ¬ì–´', rating: 4, text: 'ì»¤í”¼ê°€ ì •ë§ ë§›ìˆì–´ìš”. ë””ì €íŠ¸ë„ í›Œë¥­í•´ìš”.', date: '2024-01-19'}
                        ]
                    }
                }
            },
            '10:30': {
                icon: 'ğŸï¸',
                category: 'ì˜¤ì „ í™œë™',
                options: {
                    seongsan: jejuDatabase.attractions.seongsan,
                    manjanggul: {
                        id: 'manjanggul',
                        name: 'ë§Œì¥êµ´',
                        rating: 4.3,
                        reviewCount: 2156,
                        cost: 16000,
                        type: 'activity',
                        lat: 33.5289,
                        lng: 126.7712,
                        tags: ['ë™êµ´', 'ìœ ë„¤ìŠ¤ì½”', 'ì‹¤ë‚´'],
                        menu: [
                            {item: 'ì„±ì¸ ì…ì¥ë£Œ', price: 4000, description: 'ë§Œ 19ì„¸ ì´ìƒ'},
                            {item: 'ì²­ì†Œë…„ ì…ì¥ë£Œ', price: 2000, description: '13-18ì„¸'},
                            {item: 'ì–´ë¦°ì´ ì…ì¥ë£Œ', price: 2000, description: '6-12ì„¸'},
                            {item: 'ì£¼ì°¨ë£Œ', price: 2000, description: 'ìŠ¹ìš©ì°¨'},
                            {item: 'ê°€ì´ë“œ íˆ¬ì–´', price: 6000, description: 'ì „ë¬¸ í•´ì„¤'}
                        ],
                        reviews: [
                            {author: 'ë™êµ´íƒí—˜ê°€', rating: 4, text: 'ì‹œì›í•˜ê³  ì‹ ê¸°í•´ìš”! ì—¬ë¦„ì— ê°€ê¸° ì¢‹ì•„ìš”.', date: '2024-01-21'},
                            {author: 'ìì—°ëŸ¬ë²„', rating: 5, text: 'ìì—°ì˜ ì‹ ë¹„ë¥¼ ëŠë‚„ ìˆ˜ ìˆëŠ” ê³³ì…ë‹ˆë‹¤.', date: '2024-01-18'}
                        ]
                    },
                    snoopy_garden: {
                        id: 'snoopy_garden',
                        name: 'ìŠ¤ëˆ„í”¼ ê°€ë“ ',
                        rating: 4.2,
                        reviewCount: 1834,
                        cost: 62000,
                        type: 'activity',
                        lat: 33.4253,
                        lng: 126.7958,
                        tags: ['í…Œë§ˆíŒŒí¬', 'í¬í† ì¡´', 'ê°€ì¡±'],
                        menu: [
                            {item: 'ì„±ì¸ ì…ì¥ê¶Œ', price: 20000, description: 'ë§Œ 19ì„¸ ì´ìƒ'},
                            {item: 'ì²­ì†Œë…„ ì…ì¥ê¶Œ', price: 18000, description: '13-18ì„¸'},
                            {item: 'ì–´ë¦°ì´ ì…ì¥ê¶Œ', price: 16000, description: '36ê°œì›”-12ì„¸'},
                            {item: 'ì£¼ì°¨ë£Œ', price: 2000, description: 'ìŠ¹ìš©ì°¨'},
                            {item: 'ê¸°ë…í’ˆ', price: 6000, description: 'ìŠ¤ëˆ„í”¼ êµ¿ì¦ˆ'}
                        ],
                        reviews: [
                            {author: 'ìŠ¤ëˆ„í”¼íŒ¬', rating: 5, text: 'ì•„ì´ë“¤ì´ ë„ˆë¬´ ì¢‹ì•„í•´ìš”! í¬í† ì¡´ì´ ë§ì•„ìš”.', date: '2024-01-20'},
                            {author: 'ê°€ì¡±ì—¬í–‰ê°', rating: 4, text: 'ê·€ì—½ê³  ì˜ˆë»ìš”. ì¸ìŠ¤íƒ€ ì‚¬ì§„ ì°ê¸° ì¢‹ì•„ìš”.', date: '2024-01-17'}
                        ]
                    }
                }
            },
            '13:00': {
                icon: 'ğŸ´',
                category: 'ì ì‹¬ ì‹ì‚¬',
                options: {
                    abalone_restaurant: {
                        id: 'abalone_restaurant',
                        name: 'ëª…ì§„ì „ë³µ',
                        rating: 4.4,
                        reviewCount: 1247,
                        cost: 70000,
                        type: 'food',
                        lat: 33.5485,
                        lng: 126.8533,
                        tags: ['ì „ë³µ', 'í–¥í† ìŒì‹'],
                        menu: [
                            {item: 'ì „ë³µëŒì†¥ë°¥', price: 18000, description: 'ì œì£¼ ëª…ë¬¼'},
                            {item: 'ì „ë³µì£½', price: 15000, description: 'ë¶€ë“œëŸ¬ìš´ ì£½'},
                            {item: 'ì „ë³µêµ¬ì´', price: 25000, description: 'ì‹±ì‹±í•œ ì „ë³µ'},
                            {item: 'í•´ë¬¼íƒ•', price: 35000, description: '2-3ì¸ë¶„'},
                            {item: 'ë¯¸ì—­êµ­', price: 8000, description: 'ì œì£¼ ë¯¸ì—­'}
                        ],
                        reviews: [
                            {author: 'ì „ë³µëŸ¬ë²„', rating: 5, text: 'ì „ë³µëŒì†¥ë°¥ì´ ì •ë§ ë§›ìˆì–´ìš”! ê³ ì†Œí•´ìš”.', date: '2024-01-23'},
                            {author: 'í•´ì‚°ë¬¼ë§¤ë‹ˆì•„', rating: 4, text: 'ì‹ ì„ í•˜ê³  ì–‘ë„ ë§ì•„ìš”. ê°€ê²© ëŒ€ë¹„ ë§Œì¡±í•´ìš”.', date: '2024-01-20'}
                        ]
                    }
                }
            },
            '15:00': {
                icon: 'â˜•',
                category: 'ì¹´í˜ íƒ€ì„',
                options: {
                    cafe_orda: jejuDatabase.cafes.cafe_orda,
                    ocean_cafe: {
                        id: 'ocean_cafe',
                        name: 'ì˜¤ì…˜ë·° ì¹´í˜ ë¸ë§ˆë¥´',
                        rating: 4.6,
                        reviewCount: 934,
                        cost: 40000,
                        type: 'cafe',
                        lat: 33.4521,
                        lng: 126.9287,
                        tags: ['ì˜¤ì…˜ë·°', 'ë””ì €íŠ¸', 'ì¸ìŠ¤íƒ€'],
                        menu: [
                            {item: 'ì•„ë©”ë¦¬ì¹´ë…¸', price: 6000, description: 'ë°”ë‹¤ë¥¼ ë³´ë©°'},
                            {item: 'ë¼ë–¼', price: 6500, description: 'ë¶€ë“œëŸ¬ìš´ ìš°ìœ '},
                            {item: 'ì œì£¼ê°ê·¤ì—ì´ë“œ', price: 7000, description: 'ì œì£¼ íŠ¹ì‚°'},
                            {item: 'ì¹˜ì¦ˆì¼€ì´í¬', price: 9000, description: 'ìˆ˜ì œ ì¼€ì´í¬'},
                            {item: 'ë§ˆì¹´ë¡±', price: 3000, description: 'ì»¬ëŸ¬í’€í•œ ë§ˆì¹´ë¡±'}
                        ],
                        reviews: [
                            {author: 'ë·°ë§›ì§‘', rating: 5, text: 'ë°”ë‹¤ ë·°ê°€ ì •ë§ ì¢‹ì•„ìš”! ì»¤í”¼ë„ ë§›ìˆì–´ìš”.', date: '2024-01-22'},
                            {author: 'ë””ì €íŠ¸ëŸ¬ë²„', rating: 4, text: 'ì¼€ì´í¬ê°€ ì •ë§ ë§›ìˆì–´ìš”. ì‚¬ì§„ë„ ì˜ˆë»ìš”.', date: '2024-01-19'}
                        ]
                    }
                }
            },
            '16:30': {
                icon: 'ğŸŒŠ',
                category: 'ì˜¤í›„ í™œë™',
                options: {
                    aquaplanet: jejuDatabase.attractions.aquaplanet,
                    udo_island: {
                        id: 'udo_island',
                        name: 'ìš°ë„ ê´€ê´‘',
                        rating: 4.5,
                        reviewCount: 3421,
                        cost: 40000,
                        type: 'activity',
                        lat: 33.5000,
                        lng: 126.9500,
                        tags: ['ì„¬ì—¬í–‰', 'ìì „ê±°', 'í•´ë³€'],
                        menu: [
                            {item: 'ì™•ë³µ ë°°í¸', price: 11000, description: 'ì„±ì¸ ê¸°ì¤€'},
                            {item: 'ìì „ê±° ëŒ€ì—¬', price: 10000, description: '2ì‹œê°„'},
                            {item: 'ì „ë™ì°¨ íˆ¬ì–´', price: 15000, description: '1ì‹œê°„'},
                            {item: 'ë•…ì½©ì•„ì´ìŠ¤í¬ë¦¼', price: 3000, description: 'ìš°ë„ ëª…ë¬¼'},
                            {item: 'ì£¼ì°¨ë£Œ', price: 1000, description: 'ì„±ì‚°í•­'}
                        ],
                        reviews: [
                            {author: 'ì„¬ì—¬í–‰ëŸ¬ë²„', rating: 5, text: 'ìš°ë„ëŠ” ì •ë§ ì•„ë¦„ë‹¤ì›Œìš”! í•˜ë£¨ ì¢…ì¼ ìˆê³  ì‹¶ì–´ìš”.', date: '2024-01-24'},
                            {author: 'ìì „ê±°íˆ¬ì–´', rating: 4, text: 'ìì „ê±° íƒ€ê³  ëŒì•„ë³´ë‹ˆ ë” ì¢‹ì•˜ì–´ìš”.', date: '2024-01-21'}
                        ]
                    }
                }
            },
            '18:30': {
                icon: 'ğŸ¨',
                category: 'ìˆ™ì†Œ ì²´í¬ì¸',
                options: {
                    thefirst70: {
                        id: 'thefirst70',
                        name: 'ë” í¼ìŠ¤íŠ¸ 70 í˜¸í…”',
                        cost: 0,
                        type: 'accommodation',
                        tags: ['2ì¼ì°¨ ìˆ™ì†Œ'],
                        lat: 33.2476,
                        lng: 126.5615
                    }
                }
            },
            '19:30': {
                icon: 'ğŸ¢',
                category: 'ì €ë… ì‹ì‚¬',
                options: {
                    olle_market: {
                        id: 'olle_market',
                        name: 'ì˜¬ë ˆì‹œì¥ ë¨¹ê±°ë¦¬ íˆ¬ì–´',
                        rating: 4.3,
                        reviewCount: 1567,
                        cost: 70000,
                        type: 'food',
                        lat: 33.2498,
                        lng: 126.5612,
                        tags: ['ì‹œì¥', 'ê¸¸ê±°ë¦¬ìŒì‹'],
                        menu: [
                            {item: 'í‘ë¼ì§€ê¼¬ì¹˜', price: 5000, description: '3ê°œì…'},
                            {item: 'ë§ˆë†ì¹˜í‚¨', price: 15000, description: 'ë°˜ë§ˆë¦¬'},
                            {item: 'íšŒ í¬ì¥', price: 20000, description: 'ì†Œì'},
                            {item: 'ë–¡ë³¶ì´', price: 4000, description: 'ë§¤ì½¤í•œ ë§›'},
                            {item: 'í˜¸ë–¡', price: 2000, description: 'ë‹¬ì½¤í•œ ê°„ì‹'}
                        ],
                        reviews: [
                            {author: 'ì‹œì¥ëŸ¬ë²„', rating: 4, text: 'ë‹¤ì–‘í•œ ë¨¹ê±°ë¦¬ê°€ ë§ì•„ìš”! ê°€ê²©ë„ ì €ë ´í•´ìš”.', date: '2024-01-23'},
                            {author: 'ê¸¸ê±°ë¦¬ìŒì‹', rating: 5, text: 'í˜„ì§€ ë¶„ìœ„ê¸°ë¥¼ ëŠë‚„ ìˆ˜ ìˆì–´ìš”. ì¬ë¯¸ìˆì–´ìš”.', date: '2024-01-20'}
                        ]
                    }
                }
            }
        }
    },
    day3: {
        title: "ì„œê·€í¬ ìì—°ê³¼ ì„œìª½ì˜ ë‚­ë§Œ",
        slots: {
            '09:30': {
                icon: 'ğŸï¸',
                category: 'ì˜¤ì „ í™œë™',
                options: {
                    cheonjiyeon: {
                        id: 'cheonjiyeon',
                        name: 'ì²œì§€ì—°í­í¬',
                        rating: 4.2,
                        reviewCount: 2847,
                        cost: 8000,
                        type: 'activity',
                        lat: 33.2458,
                        lng: 126.5583,
                        tags: ['í­í¬', 'ì‚°ì±…', 'ìì—°'],
                        menu: [
                            {item: 'ì„±ì¸ ì…ì¥ë£Œ', price: 2000, description: 'ë§Œ 19ì„¸ ì´ìƒ'},
                            {item: 'ì²­ì†Œë…„ ì…ì¥ë£Œ', price: 1000, description: '13-18ì„¸'},
                            {item: 'ì–´ë¦°ì´ ì…ì¥ë£Œ', price: 1000, description: '6-12ì„¸'},
                            {item: 'ì£¼ì°¨ë£Œ', price: 2000, description: 'ìŠ¹ìš©ì°¨'},
                            {item: 'ê¸°ë…í’ˆ', price: 2000, description: 'ì—½ì„œ, ë§ˆê·¸ë„·'}
                        ],
                        reviews: [
                            {author: 'í­í¬ëŸ¬ë²„', rating: 4, text: 'ì‹œì›í•˜ê³  ì¢‹ì•„ìš”! ì‚°ì±…ë¡œê°€ ì˜ ë˜ì–´ìˆì–´ìš”.', date: '2024-01-22'},
                            {author: 'ìì—°íƒë°©', rating: 5, text: 'ë¬¼ì†Œë¦¬ê°€ ì •ë§ ì‹œì›í•´ìš”. íë§ë˜ëŠ” ê³³ì´ì—ìš”.', date: '2024-01-19'}
                        ]
                    },
                    soesokkak: {
                        id: 'soesokkak',
                        name: 'ì‡ ì†Œê¹',
                        rating: 4.6,
                        reviewCount: 1923,
                        cost: 60000,
                        type: 'activity',
                        lat: 33.2513,
                        lng: 126.6264,
                        tags: ['ì¹´ì•½', 'ì•¡í‹°ë¹„í‹°', 'íˆ¬ëª…'],
                        menu: [
                            {item: 'íˆ¬ëª…ì¹´ì•½ ì²´í—˜', price: 25000, description: '1ì¸ 1ì‹œê°„'},
                            {item: 'í…Œìš° ì²´í—˜', price: 10000, description: 'ì „í†µ ë°°'},
                            {item: 'ì£¼ì°¨ë£Œ', price: 2000, description: 'ìŠ¹ìš©ì°¨'},
                            {item: 'ìƒ¤ì›Œì‹œì„¤', price: 2000, description: 'ì˜¨ìˆ˜'},
                            {item: 'êµ¬ëª…ì¡°ë¼', price: 0, description: 'ë¬´ë£Œ ëŒ€ì—¬'}
                        ],
                        reviews: [
                            {author: 'ì¹´ì•½ëŸ¬ë²„', rating: 5, text: 'íˆ¬ëª…ì¹´ì•½ ì •ë§ ì‹ ê¸°í•´ìš”! ë¬¼ì´ ë„ˆë¬´ ê¹¨ë—í•´ìš”.', date: '2024-01-24'},
                            {author: 'ì•¡í‹°ë¹„í‹°', rating: 4, text: 'ì•„ì´ë“¤ë„ ì•ˆì „í•˜ê²Œ ì¦ê¸¸ ìˆ˜ ìˆì–´ìš”.', date: '2024-01-21'}
                        ]
                    }
                }
            },
            '12:30': {
                icon: 'ğŸ´',
                category: 'ì ì‹¬ ì‹ì‚¬',
                options: {
                    saekdal_restaurant: {
                        id: 'saekdal_restaurant',
                        name: 'ì¤‘ë¬¸ ìƒ‰ë‹¬ì‹ë‹¹',
                        rating: 4.5,
                        reviewCount: 1834,
                        cost: 120000,
                        type: 'food',
                        lat: 33.2519,
                        lng: 126.4217,
                        tags: ['ê°ˆì¹˜', 'í–¥í† ìŒì‹'],
                        menu: [
                            {item: 'í†µê°ˆì¹˜êµ¬ì´(ëŒ€)', price: 45000, description: '2-3ì¸ë¶„'},
                            {item: 'ê°ˆì¹˜ì¡°ë¦¼', price: 35000, description: 'ë§¤ì½¤í•œ ë§›'},
                            {item: 'ê°ˆì¹˜êµ­', price: 12000, description: 'ì‹œì›í•œ êµ­ë¬¼'},
                            {item: 'ë³´ë¦¬ë°¥', price: 2000, description: '1ì¸ë¶„'},
                            {item: 'ë°‘ë°˜ì°¬', price: 0, description: 'ë¬´ì œí•œ'}
                        ],
                        reviews: [
                            {author: 'ê°ˆì¹˜ëŸ¬ë²„', rating: 5, text: 'í†µê°ˆì¹˜êµ¬ì´ê°€ ì •ë§ ë§›ìˆì–´ìš”! ì‚´ì´ ë¶€ë“œëŸ¬ì›Œìš”.', date: '2024-01-23'},
                            {author: 'í˜„ì§€ë§›ì§‘', rating: 4, text: 'ì˜¤ë˜ëœ ë§›ì§‘ì´ì—ìš”. í˜„ì§€ì¸ë“¤ë„ ë§ì´ ì™€ìš”.', date: '2024-01-20'}
                        ]
                    }
                }
            },
            '14:30': {
                icon: 'ğŸŒ¿',
                category: 'ì˜¤í›„ í™œë™',
                options: {
                    osulloc: {
                        id: 'osulloc',
                        name: 'ì˜¤ì„¤ë¡ í‹° ë®¤ì§€ì—„',
                        rating: 4.4,
                        reviewCount: 3521,
                        cost: 30000,
                        type: 'etc',
                        lat: 33.3059,
                        lng: 126.2894,
                        tags: ['ì°¨', 'ë°•ë¬¼ê´€', 'í¬í† ì¡´'],
                        menu: [
                            {item: 'ë…¹ì°¨ ì•„ì´ìŠ¤í¬ë¦¼', price: 5000, description: 'ì˜¤ì„¤ë¡ ëª…ë¬¼'},
                            {item: 'ì„¸ì‘', price: 8000, description: 'í”„ë¦¬ë¯¸ì—„ ë…¹ì°¨'},
                            {item: 'ë…¹ì°¨ ì¼€ì´í¬', price: 6000, description: 'ìˆ˜ì œ ì¼€ì´í¬'},
                            {item: 'ë¼ë–¼', price: 5500, description: 'ë…¹ì°¨ ë¼ë–¼'},
                            {item: 'ë§ˆì¹´ë¡±', price: 3000, description: 'ë…¹ì°¨ë§›'}
                        ],
                        reviews: [
                            {author: 'ì°¨ëŸ¬ë²„', rating: 4, text: 'ë…¹ì°¨ë°­ì´ ì •ë§ ì˜ˆë»ìš”! ì•„ì´ìŠ¤í¬ë¦¼ë„ ë§›ìˆì–´ìš”.', date: '2024-01-22'},
                            {author: 'í¬í† ì¡´', rating: 5, text: 'ì‚¬ì§„ ì°ê¸° ì¢‹ì€ ê³³ì´ì—ìš”. ì¸ìŠ¤íƒ€ ê°ì„±!', date: '2024-01-19'}
                        ]
                    },
                    camellia_hill: {
                        id: 'camellia_hill',
                        name: 'ì¹´ë©œë¦¬ì•„í',
                        rating: 4.3,
                        reviewCount: 1456,
                        cost: 66000,
                        type: 'activity',
                        lat: 33.2913,
                        lng: 126.3688,
                        tags: ['ìˆ˜ëª©ì›', 'ìˆ˜êµ­', 'í¬í† ì¡´'],
                        menu: [
                            {item: 'ì„±ì¸ ì…ì¥ê¶Œ', price: 8000, description: 'ë§Œ 19ì„¸ ì´ìƒ'},
                            {item: 'ì²­ì†Œë…„ ì…ì¥ê¶Œ', price: 6000, description: '13-18ì„¸'},
                            {item: 'ì–´ë¦°ì´ ì…ì¥ê¶Œ', price: 6000, description: '6-12ì„¸'},
                            {item: 'ì£¼ì°¨ë£Œ', price: 2000, description: 'ìŠ¹ìš©ì°¨'},
                            {item: 'ê°€ì´ë“œë¶', price: 3000, description: 'ì‹ë¬¼ ì„¤ëª…ì„œ'}
                        ],
                        reviews: [
                            {author: 'ìˆ˜ëª©ì›ëŸ¬ë²„', rating: 4, text: 'ì—¬ë¦„ ìˆ˜êµ­ì´ ì •ë§ ì˜ˆë»ìš”! ì‚¬ì§„ ì°ê¸° ì¢‹ì•„ìš”.', date: '2024-01-21'},
                            {author: 'ìì—°ëŸ¬ë²„', rating: 5, text: 'ë‹¤ì–‘í•œ ì‹ë¬¼ë“¤ì„ ë³¼ ìˆ˜ ìˆì–´ìš”. íë§ë¼ìš”.', date: '2024-01-18'}
                        ]
                    }
                }
            },
            '17:00': {
                icon: 'ğŸ¨',
                category: 'ìˆ™ì†Œ ì²´í¬ì¸',
                options: {
                    airbnb: {
                        id: 'airbnb',
                        name: 'íŒí¬í¬êµ¬ í”„ë¦¬ë¯¸ì—„ ìŠ¤í…Œì´',
                        cost: 0,
                        type: 'accommodation',
                        tags: ['3ì¼ì°¨ ìˆ™ì†Œ'],
                        lat: 33.3857,
                        lng: 126.2104
                    }
                }
            },
            '18:30': {
                icon: 'ğŸŒ…',
                category: 'ì €ë… ì‹ì‚¬',
                options: {
                    hanlim_noodle: {
                        id: 'hanlim_noodle',
                        name: 'í•œë¦¼ì¹¼êµ­ìˆ˜',
                        rating: 4.2,
                        reviewCount: 892,
                        cost: 50000,
                        type: 'food',
                        lat: 33.4116,
                        lng: 126.2625,
                        tags: ['ì¹¼êµ­ìˆ˜', 'ê°€ì„±ë¹„'],
                        menu: [
                            {item: 'ë³´ë§ì¹¼êµ­ìˆ˜', price: 8000, description: 'ì œì£¼ íŠ¹ì‚°'},
                            {item: 'ë©¸ì¹˜ì¹¼êµ­ìˆ˜', price: 7000, description: 'ë‹´ë°±í•œ ë§›'},
                            {item: 'ë§Œë‘', price: 6000, description: 'ìˆ˜ì œ ë§Œë‘'},
                            {item: 'ê¹€ì¹˜', price: 3000, description: 'ì‚¬ì´ë“œë©”ë‰´'},
                            {item: 'ê³µê¸°ë°¥', price: 1000, description: 'ì¶”ê°€ ì£¼ë¬¸'}
                        ],
                        reviews: [
                            {author: 'ì¹¼êµ­ìˆ˜ëŸ¬ë²„', rating: 4, text: 'ë³´ë§ì¹¼êµ­ìˆ˜ê°€ ì •ë§ ë§›ìˆì–´ìš”! êµ­ë¬¼ì´ ì‹œì›í•´ìš”.', date: '2024-01-23'},
                            {author: 'ê°€ì„±ë¹„', rating: 5, text: 'ê°€ê²© ì €ë ´í•˜ê³  ì–‘ë„ ë§ì•„ìš”. í˜„ì§€ ë§›ì§‘ì´ì—ìš”.', date: '2024-01-20'}
                        ]
                    }
                }
            }
        }
    },
    day4: {
        title: "ì•„ì‰¬ìš´ ë§ˆì§€ë§‰ ë‚  & ì¶œë°œ",
        slots: {
            '10:00': {
                icon: 'ğŸŒŠ',
                category: 'ì˜¤ì „ í™œë™',
                options: {
                    snorkeling: {
                        id: 'snorkeling',
                        name: 'íŒí¬í¬êµ¬ ìŠ¤ë…¸í´ë§',
                        rating: 4.4,
                        reviewCount: 756,
                        cost: 80000,
                        type: 'activity',
                        lat: 33.3861,
                        lng: 126.2117,
                        tags: ['ìŠ¤ë…¸í´ë§', 'ë°”ë‹¤', 'ì•¡í‹°ë¹„í‹°'],
                        menu: [
                            {item: 'ìŠ¤ë…¸í´ë§ ì²´í—˜', price: 25000, description: '1ì¸ 1ì‹œê°„'},
                            {item: 'ì¥ë¹„ ëŒ€ì—¬', price: 10000, description: 'ë§ˆìŠ¤í¬, í•€'},
                            {item: 'ê°•ì‚¬ ë™í–‰', price: 10000, description: 'ì•ˆì „ ê°€ì´ë“œ'},
                            {item: 'ìƒ¤ì›Œì‹œì„¤', price: 2000, description: 'ì˜¨ìˆ˜'},
                            {item: 'ì£¼ì°¨ë£Œ', price: 1000, description: 'ìŠ¹ìš©ì°¨'}
                        ],
                        reviews: [
                            {author: 'ìŠ¤ë…¸í´ë§', rating: 5, text: 'ë¬¼ì´ ì •ë§ ê¹¨ë—í•´ìš”! ë¬¼ê³ ê¸°ë“¤ì´ ë§ì•„ìš”.', date: '2024-01-24'},
                            {author: 'ë°”ë‹¤ëŸ¬ë²„', rating: 4, text: 'ì´ˆë³´ìë„ ì‰½ê²Œ í•  ìˆ˜ ìˆì–´ìš”. ì¬ë¯¸ìˆì–´ìš”.', date: '2024-01-21'}
                        ]
                    },
                    hanlim_park: {
                        id: 'hanlim_park',
                        name: 'í•œë¦¼ê³µì›',
                        rating: 4.2,
                        reviewCount: 1634,
                        cost: 58000,
                        type: 'activity',
                        lat: 33.3917,
                        lng: 126.2369,
                        tags: ['ê³µì›', 'ë™êµ´', 'í…Œë§ˆíŒŒí¬'],
                        menu: [
                            {item: 'ì„±ì¸ ì…ì¥ê¶Œ', price: 10000, description: 'ë§Œ 19ì„¸ ì´ìƒ'},
                            {item: 'ì²­ì†Œë…„ ì…ì¥ê¶Œ', price: 7000, description: '13-18ì„¸'},
                            {item: 'ì–´ë¦°ì´ ì…ì¥ê¶Œ', price: 6000, description: '6-12ì„¸'},
                            {item: 'ì£¼ì°¨ë£Œ', price: 2000, description: 'ìŠ¹ìš©ì°¨'},
                            {item: 'ê¸°ë…í’ˆ', price: 5000, description: 'í‰ê·  ê°€ê²©'}
                        ],
                        reviews: [
                            {author: 'ê³µì›ëŸ¬ë²„', rating: 4, text: 'ë‹¤ì–‘í•œ ë³¼ê±°ë¦¬ê°€ ìˆì–´ìš”! ì•¼ììˆ˜ê¸¸ì´ ì˜ˆë»ìš”.', date: '2024-01-22'},
                            {author: 'ê°€ì¡±ì—¬í–‰', rating: 4, text: 'ì•„ì´ë“¤ì´ ì¢‹ì•„í•´ìš”. ë°˜ë‚˜ì ˆ ì½”ìŠ¤ë¡œ ì¢‹ì•„ìš”.', date: '2024-01-19'}
                        ]
                    }
                }
            },
            '13:00': {
                icon: 'ğŸ´',
                category: 'ë§ˆì§€ë§‰ ì ì‹¬',
                options: {
                    nolman: {
                        id: 'nolman',
                        name: 'ë†€ë§¨',
                        rating: 4.5,
                        reviewCount: 1234,
                        cost: 40000,
                        type: 'food',
                        lat: 33.4616,
                        lng: 126.3118,
                        tags: ['í•´ë¬¼ë¼ë©´', 'ì˜¤ì…˜ë·°'],
                        menu: [
                            {item: 'í•´ë¬¼ë¼ë©´', price: 12000, description: 'ë°”ë‹¤ ì• ë¼ë©´'},
                            {item: 'ì¹˜ì¦ˆë¼ë©´', price: 13000, description: 'ì¹˜ì¦ˆ í† í•‘'},
                            {item: 'ê³„ë€ë¼ë©´', price: 11000, description: 'ê³„ë€ ì¶”ê°€'},
                            {item: 'ìŒë£Œìˆ˜', price: 2000, description: 'ì‹œì›í•œ ìŒë£Œ'},
                            {item: 'ê³¼ì', price: 3000, description: 'ê°„ì‹'}
                        ],
                        reviews: [
                            {author: 'ë¼ë©´ëŸ¬ë²„', rating: 5, text: 'ë°”ë‹¤ ë³´ë©´ì„œ ë¨¹ëŠ” ë¼ë©´! ìµœê³ ì˜ˆìš”!', date: '2024-01-23'},
                            {author: 'ë·°ë§›ì§‘', rating: 4, text: 'ë·°ê°€ ì •ë§ ì¢‹ì•„ìš”. ì¸ìƒìƒ· ì°ì„ ìˆ˜ ìˆì–´ìš”.', date: '2024-01-20'}
                        ]
                    }
                }
            },
            '14:30': {
                icon: 'ğŸ',
                category: 'ê¸°ë…í’ˆ & ë°˜ë‚©',
                options: {
                    shopping: {
                        id: 'shopping',
                        name: 'ë©´ì„¸ì  & ë ŒíŠ¸ì¹´ ë°˜ë‚©',
                        rating: 4.1,
                        reviewCount: 892,
                        cost: 50000,
                        type: 'etc',
                        lat: 33.5049,
                        lng: 126.4950,
                        tags: ['ì‡¼í•‘', 'ë©´ì„¸ì '],
                        menu: [
                            {item: 'ì œì£¼ íŠ¹ì‚°í’ˆ', price: 15000, description: 'ê°ê·¤, ì´ˆì½œë¦¿'},
                            {item: 'í•œë¼ë´‰', price: 20000, description: '5kg ë°•ìŠ¤'},
                            {item: 'í‘ë¼ì§€ ìœ¡í¬', price: 10000, description: 'ê°„ì‹ìš©'},
                            {item: 'í™”ì¥í’ˆ', price: 30000, description: 'ë©´ì„¸ì '},
                            {item: 'ë ŒíŠ¸ì¹´ ì£¼ìœ ', price: 50000, description: 'ë°˜ë‚© ì „ í•„ìˆ˜'}
                        ],
                        reviews: [
                            {author: 'ì‡¼í•‘ëŸ¬ë²„', rating: 4, text: 'ê¸°ë…í’ˆ ì¢…ë¥˜ê°€ ë§ì•„ìš”. ê°€ê²©ë„ í•©ë¦¬ì ì´ì—ìš”.', date: '2024-01-22'},
                            {author: 'ì„ ë¬¼ê³ ë¯¼', rating: 4, text: 'ì„ ë¬¼ìš©ìœ¼ë¡œ ì‚¬ê¸° ì¢‹ì€ ê²ƒë“¤ì´ ë§ì•„ìš”.', date: '2024-01-19'}
                        ]
                    }
                }
            },
            '18:00': {
                icon: 'ğŸ›«',
                category: 'ì œì£¼ê³µí•­ ì¶œë°œ',
                options: {
                    departure: {
                        id: 'departure',
                        name: 'ì—¬í–‰ ë§ˆë¬´ë¦¬',
                        cost: 0,
                        type: 'etc',
                        tags: ['í•„ìˆ˜', 'ì¶œë°œ'],
                        lat: 33.5104,
                        lng: 126.4913
                    }
                }
            }
        }
    }
};

// ì „ì—­ ë³€ìˆ˜
let googleMap, placesService, directionsService, directionsRenderer;
let activeDay = 1;
let selections = {};
let originalSelections = {};
let isNaviModeActive = false;
let isThemeSearchActive = false;
let watchId = null;
let userLocationMarker = null;
let themeMarkers = [];
let infoWindows = [];
const fixedCosts = { flight: 0, hotel: 0 };

// ì´ˆê¸°í™”
function initApp() {
    initUI();
    initMap();
    setupEventListeners();
    setupInitialState();
}

function initUI() {
    const tabsContainer = document.getElementById('day-tabs-container');
    const itineraryContainer = document.getElementById('itinerary-container');
    
    // íƒ­ ìƒì„±
    Object.keys(itineraryData).forEach((dayKey, index) => {
        const day = parseInt(dayKey.replace('day', ''));
        const tab = document.createElement('button');
        tab.className = `day-tab ${index === 0 ? 'active' : ''}`;
        tab.textContent = `${day}ì¼ì°¨`;
        tab.dataset.day = day;
        tab.onclick = () => switchDay(day);
        tabsContainer.appendChild(tab);
    });

    // ì¼ì • ì½˜í…ì¸  ìƒì„±
    Object.keys(itineraryData).forEach((dayKey, index) => {
        const day = parseInt(dayKey.replace('day', ''));
        const dayData = itineraryData[dayKey];
        
        const dayContent = document.createElement('div');
        dayContent.id = `day${day}`;
        dayContent.className = `day-content ${index > 0 ? 'hidden' : ''}`;
        dayContent.innerHTML = `
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">${dayData.title}</h2>
                <div class="timeline-container">
                    <div class="timeline-line"></div>
                    ${Object.entries(dayData.slots).map(([time, slot], slotIndex) => `
                        <div class="relative mb-8">
                            <div class="timeline-dot"></div>
                            <div class="ml-8">
                                <div class="flex items-center mb-4">
                                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold mr-4">${time}</span>
                                    <h3 class="text-xl font-bold text-gray-800">${slot.icon} ${slot.category}</h3>
                                    <div class="distance-info ml-auto" data-day="${day}" data-time="${time}"></div>
                                </div>
                                <div class="options-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" data-day="${day}" data-time="${time}">
                                    ${slot.options ? generateOptionsHtml(day, time, slot.options) : '<div class="text-gray-500">ë™ì  ê²€ìƒ‰ ì˜µì…˜ì´ ë¡œë“œë©ë‹ˆë‹¤...</div>'}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
        itineraryContainer.appendChild(dayContent);
    });
}

function generateOptionsHtml(day, time, options) {
    let optionNumber = 1;
    return Object.entries(options).map(([id, option]) => `
        <div class="option-card" 
             data-id="${option.id}" 
             data-name="${option.name}" 
             data-cost="${option.cost}" 
             data-type="${option.type}" 
             data-lat="${option.lat}" 
             data-lng="${option.lng}"
             data-day="${day}"
             data-time="${time}"
             onclick="handleOptionSelect(${day}, '${time}', this)">
            <div class="card-number">${optionNumber++}</div>
            <div class="flex justify-between items-start mb-3">
                <h4 class="font-bold text-gray-800 text-lg pr-2">${option.name}</h4>
                <span class="cost-badge">â‚©${option.cost.toLocaleString()}</span>
            </div>
            ${option.rating ? `
                <div class="flex items-center mb-2">
                    <div class="rating-stars mr-2">
                        ${'â˜…'.repeat(Math.floor(option.rating))}${'â˜†'.repeat(5 - Math.floor(option.rating))}
                    </div>
                    <span class="text-sm text-gray-600">${option.rating} (${option.reviewCount || 0})</span>
                </div>
            ` : ''}
            <div class="flex flex-wrap gap-2">
                ${option.tags.map(tag => `<span class="text-xs font-semibold ${getTagColor(tag)} px-2 py-1 rounded-full">${tag}</span>`).join('')}
            </div>
        </div>
    `).join('');
}

function getTagColor(tag) {
    const colorMap = {
        'í•„ìˆ˜': 'bg-red-100 text-red-700',
        'ê°€ì„±ë¹„': 'bg-green-100 text-green-700',
        'í¬í† ì¡´': 'bg-purple-100 text-purple-700',
        'ì˜¤ì…˜ë·°': 'bg-blue-100 text-blue-700',
        'í–¥í† ìŒì‹': 'bg-orange-100 text-orange-700',
        'ì‹¤ë‚´': 'bg-cyan-100 text-cyan-700'
    };
    return colorMap[tag] || 'bg-gray-100 text-gray-700';
}

function initMap() {
    try {
        googleMap = new google.maps.Map(document.getElementById('map'), {
            center: { lat: 33.385, lng: 126.55 },
            zoom: 9,
            styles: [
                {
                    featureType: "poi",
                    elementType: "labels",
                    stylers: [{ visibility: "off" }]
                }
            ]
        });

        placesService = new google.maps.places.PlacesService(googleMap);
        directionsService = new google.maps.DirectionsService();
        directionsRenderer = new google.maps.DirectionsRenderer({
            suppressMarkers: true,
            polylineOptions: {
                strokeColor: '#4f46e5',
                strokeWeight: 5,
                strokeOpacity: 0.8
            }
        });
        directionsRenderer.setMap(googleMap);
        
        updateMapForDay(1);
    } catch (e) {
        console.error('Map initialization failed:', e);
        document.getElementById('map').innerHTML = '<div class="flex items-center justify-center h-full text-red-500">ì§€ë„ ë¡œë”© ì‹¤íŒ¨</div>';
    }
}

function setupEventListeners() {
    // ê²½ë¹„ ì…ë ¥ ì´ë²¤íŠ¸
    document.getElementById('flight-cost').addEventListener('input', e => {
        fixedCosts.flight = parseInt(e.target.value) || 0;
        updateCostDisplay();
    });
    
    document.getElementById('hotel-cost').addEventListener('input', e => {
        fixedCosts.hotel = parseInt(e.target.value) || 0;
        updateCostDisplay();
    });

    // ë²„íŠ¼ ì´ë²¤íŠ¸
    document.getElementById('theme-search-toggle').onclick = toggleThemeSearch;
    document.getElementById('reset-button').onclick = resetToOriginal;
    document.getElementById('navi-mode-toggle').onclick = toggleNaviMode;
}

function setupInitialState() {
    // ê° ë‚ ì§œë³„ë¡œ ì²« ë²ˆì§¸ ì˜µì…˜ ê¸°ë³¸ ì„ íƒ
    Object.keys(itineraryData).forEach(dayKey => {
        const day = parseInt(dayKey.replace('day', ''));
        selections[day] = {};
        
        Object.entries(itineraryData[dayKey].slots).forEach(([time, slot]) => {
            if (slot.options) {
                const firstOptionKey = Object.keys(slot.options)[0];
                const optionData = slot.options[firstOptionKey];
                selections[day][time] = { ...optionData };
                
                // UIì—ì„œ ì„ íƒ í‘œì‹œ
                const card = document.querySelector(`.option-card[data-day="${day}"][data-time="${time}"]`);
                if (card) {
                    card.classList.add('selected');
                }
            }
        });
    });
    
    // ì›ë³¸ ìƒíƒœ ì €ì¥
    originalSelections = JSON.parse(JSON.stringify(selections));
    updateAllDisplays();
}

function switchDay(day) {
    activeDay = day;
    
    // íƒ­ ìƒíƒœ ì—…ë°ì´íŠ¸
    document.querySelectorAll('.day-tab').forEach(tab => {
        tab.classList.toggle('active', parseInt(tab.dataset.day) === day);
    });
    
    // ì½˜í…ì¸  í‘œì‹œ/ìˆ¨ê¹€
    document.querySelectorAll('.day-content').forEach(content => {
        content.classList.toggle('hidden', parseInt(content.id.replace('day', '')) !== day);
    });
    
    updateMapForDay(day);
    updateSelectedItemsDisplay();
}

function handleOptionSelect(day, time, cardElement) {
    const grid = cardElement.closest('.options-grid');
    const isAlreadySelected = cardElement.classList.contains('selected');
    
    // ê¸°ì¡´ ë©”ë‰´ íŒ¨ë„ ì œê±°
    const existingPanel = grid.querySelector('.menu-panel');
    if (existingPanel) {
        existingPanel.remove();
    }

    // ê°™ì€ ê·¸ë¦¬ë“œì˜ ë‹¤ë¥¸ ì¹´ë“œë“¤ ì„ íƒ í•´ì œ
    grid.querySelectorAll('.option-card').forEach(card => {
        card.classList.remove('selected');
    });

    if (isAlreadySelected) {
        delete selections[day][time];
        updateAllDisplays();
        return;
    }

    // ì¹´ë“œ ì„ íƒ
    cardElement.classList.add('selected');
    
    // ì˜µì…˜ ë°ì´í„° ì¶”ì¶œ
    const optionData = {
        id: cardElement.dataset.id,
        name: cardElement.dataset.name,
        cost: parseInt(cardElement.dataset.cost),
        type: cardElement.dataset.type,
        lat: parseFloat(cardElement.dataset.lat),
        lng: parseFloat(cardElement.dataset.lng)
    };

    // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    const detailData = findDetailData(optionData.id);
    if (detailData) {
        optionData.menu = detailData.menu;
        optionData.reviews = detailData.reviews;
        optionData.rating = detailData.rating;
        optionData.reviewCount = detailData.reviewCount;
    }

    selections[day][time] = optionData;
    
    // ë©”ë‰´ íŒ¨ë„ í‘œì‹œ
    showMenuPanel(grid, optionData);
    
    updateAllDisplays();
}

function findDetailData(id) {
    // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ IDë¡œ ìƒì„¸ ì •ë³´ ì°¾ê¸°
    for (const category of Object.values(jejuDatabase)) {
        if (category[id]) {
            return category[id];
        }
    }
    return null;
}

function showMenuPanel(grid, optionData) {
    const hasMenu = optionData.menu && optionData.menu.length > 0;
    const hasReviews = optionData.reviews && optionData.reviews.length > 0;
    
    const menuPanel = document.createElement('div');
    menuPanel.className = 'menu-panel';
    menuPanel.innerHTML = `
        <div class="menu-tabs">
            ${hasMenu ? '<div class="menu-tab active" data-tab="menu">ë©”ë‰´ ì •ë³´</div>' : ''}
            ${hasReviews ? `<div class="menu-tab ${!hasMenu ? 'active' : ''}" data-tab="reviews">ë¦¬ë·° (${optionData.reviewCount || 0})</div>` : ''}
            <div class="menu-tab" data-tab="info">ìƒì„¸ ì •ë³´</div>
        </div>
        ${hasMenu ? `<div class="menu-content active" data-content="menu">${generateMenuContent(optionData.menu)}</div>` : ''}
        ${hasReviews ? `<div class="menu-content ${!hasMenu ? 'active' : ''}" data-content="reviews">${generateReviewContent(optionData.reviews)}</div>` : ''}
        <div class="menu-content" data-content="info">${generateInfoContent(optionData)}</div>
    `;
    
    // íƒ­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    menuPanel.querySelectorAll('.menu-tab').forEach(tab => {
        tab.onclick = () => {
            menuPanel.querySelectorAll('.menu-tab, .menu-content').forEach(el => el.classList.remove('active'));
            tab.classList.add('active');
            menuPanel.querySelector(`[data-content="${tab.dataset.tab}"]`).classList.add('active');
        };
    });
    
    grid.appendChild(menuPanel);
    
    // ì• ë‹ˆë©”ì´ì…˜
    setTimeout(() => {
        menuPanel.classList.add('open');
    }, 50);
}

function generateMenuContent(menu) {
    const familyPrice = menu.reduce((sum, item) => sum + item.price, 0) * 1.2;
    return `
        <div class="space-y-2">
            ${menu.slice(0, 5).map(item => `
                <div class="flex justify-between items-center py-2 border-b border-gray-200">
                    <div>
                        <span class="font-semibold">${item.item}</span>
                        ${item.description ? `<p class="text-sm text-gray-600">${item.description}</p>` : ''}
                    </div>
                    <span class="font-bold text-blue-600">â‚©${item.price.toLocaleString()}</span>
                </div>
            `).join('')}
            <div class="mt-4 p-3 bg-blue-50 rounded-lg text-center">
                <p class="text-sm text-gray-600">4ì¸ ê°€ì¡± ì˜ˆìƒ ë¹„ìš©</p>
                <p class="text-xl font-bold text-blue-600">â‚©${Math.ceil(familyPrice / 1000) * 1000}</p>
            </div>
        </div>
    `;
}

function generateReviewContent(reviews) {
    return `
        <div class="space-y-4">
            ${reviews.slice(0, 3).map(review => `
                <div class="border-b border-gray-200 pb-3">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-semibold">${review.author}</span>
                        <div class="flex">
                            <div class="rating-stars mr-2">${'â˜…'.repeat(review.rating)}${'â˜†'.repeat(5 - review.rating)}</div>
                            <span class="text-sm text-gray-500">${review.date}</span>
                        </div>
                    </div>
                    <p class="text-gray-700">${review.text}</p>
                </div>
            `).join('')}
        </div>
    `;
}

function generateInfoContent(optionData) {
    return `
        <div class="space-y-3">
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <span class="text-gray-600">ì¹´í…Œê³ ë¦¬</span>
                    <p class="font-semibold">${optionData.type === 'food' ? 'ìŒì‹ì ' : optionData.type === 'activity' ? 'ê´€ê´‘/ì²´í—˜' : 'ê¸°íƒ€'}</p>
                </div>
                <div>
                    <span class="text-gray-600">ì˜ˆìƒ ë¹„ìš©</span>
                    <p class="font-semibold">â‚©${optionData.cost.toLocaleString()}</p>
                </div>
            </div>
            ${optionData.rating ? `
                <div>
                    <span class="text-gray-600">í‰ì </span>
                    <p class="font-semibold">${optionData.rating}/5.0 (${optionData.reviewCount || 0}ê°œ ë¦¬ë·°)</p>
                </div>
            ` : ''}
            <div>
                <span class="text-gray-600">ìœ„ì¹˜</span>
                <p class="font-semibold">ìœ„ë„: ${optionData.lat}, ê²½ë„: ${optionData.lng}</p>
            </div>
        </div>
    `;
}

// í…Œë§ˆ ê²€ìƒ‰ ê¸°ëŠ¥
function toggleThemeSearch() {
    const panel = document.getElementById('theme-search-panel');
    const toggle = document.getElementById('theme-search-toggle');
    
    isThemeSearchActive = !isThemeSearchActive;
    
    if (isThemeSearchActive) {
        panel.classList.remove('hidden');
        toggle.innerHTML = '<i class="fas fa-times mr-2"></i>ê²€ìƒ‰ ë‹«ê¸°';
        toggle.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
    } else {
        panel.classList.add('hidden');
        clearThemeMarkers();
        toggle.innerHTML = '<i class="fas fa-search mr-2"></i>í…Œë§ˆ ê²€ìƒ‰';
        toggle.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
    }
}

function searchByTheme(type) {
    clearThemeMarkers();
    
    // ì œì£¼ë„ ì¤‘ì‹¬ì—ì„œ ê²€ìƒ‰
    const jejuCenter = { lat: 33.385, lng: 126.55 };
    
    let keyword = '';
    switch(type) {
        case 'restaurant': keyword = 'ì œì£¼ ë§›ì§‘'; break;
        case 'cafe': keyword = 'ì œì£¼ ì¹´í˜'; break;
        case 'tourist_attraction': keyword = 'ì œì£¼ ê´€ê´‘ì§€'; break;
        case 'beach': keyword = 'ì œì£¼ í•´ìˆ˜ìš•ì¥'; break;
        case 'shopping': keyword = 'ì œì£¼ ì‡¼í•‘'; break;
        case 'activity': keyword = 'ì œì£¼ ì²´í—˜'; break;
    }
    
    const request = {
        location: new google.maps.LatLng(jejuCenter.lat, jejuCenter.lng),
        radius: 15000,
        keyword: keyword,
        language: 'ko'
    };
    
    placesService.nearbySearch(request, (results, status) => {
        if (status === google.maps.places.PlacesServiceStatus.OK && results) {
            const filtered = results
                .filter(p => p.rating && p.rating >= 3.5)
                .sort((a, b) => b.rating - a.rating)
                .slice(0, 20);
                
            filtered.forEach(place => {
                const marker = new google.maps.Marker({
                    position: place.geometry.location,
                    map: googleMap,
                    title: place.name,
                    icon: {
                        url: getThemeIcon(type),
                        scaledSize: new google.maps.Size(35, 35)
                    }
                });
                
                marker.addListener('click', () => {
                    showThemeInfoWindow(marker, place, type);
                });
                
                themeMarkers.push(marker);
            });
            
            // ì§€ë„ ë²”ìœ„ ì¡°ì •
            if (filtered.length > 0) {
                const bounds = new google.maps.LatLngBounds();
                filtered.forEach(place => bounds.extend(place.geometry.location));
                googleMap.fitBounds(bounds);
            }
        }
    });
}

function getThemeIcon(type) {
    const icons = {
        'restaurant': 'https://maps.google.com/mapfiles/ms/icons/restaurant.png',
        'cafe': 'https://maps.google.com/mapfiles/ms/icons/coffeehouse.png',
        'tourist_attraction': 'https://maps.google.com/mapfiles/ms/icons/blue-dot.png',
        'beach': 'https://maps.google.com/mapfiles/ms/icons/blue.png',
        'shopping': 'https://maps.google.com/mapfiles/ms/icons/shopping.png',
        'activity': 'https://maps.google.com/mapfiles/ms/icons/green-dot.png'
    };
    return icons[type] || 'https://maps.google.com/mapfiles/ms/icons/red-dot.png';
}

function showThemeInfoWindow(marker, place, type) {
    // ê¸°ì¡´ ì •ë³´ì°½ ë‹«ê¸°
    infoWindows.forEach(infoWindow => infoWindow.close());
    infoWindows = [];
    
    const cost = estimateDynamicCost(place.types, type);
    
    // ì¥ì†Œ ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    placesService.getDetails({
        placeId: place.place_id,
        fields: ['reviews', 'url', 'formatted_phone_number', 'opening_hours', 'photos', 'price_level']
    }, (details, status) => {
        let menuHtml = '';
        let reviewsHtml = '';
        
        if (status === google.maps.places.PlacesServiceStatus.OK && details) {
            // ë©”ë‰´ ì •ë³´ (ì˜ˆìƒ)
            if (type === 'restaurant' || type === 'cafe') {
                const sampleMenu = generateSampleMenu(type, details.price_level || 2);
                menuHtml = `
                    <div class="mt-3">
                        <h5 class="font-semibold mb-2">ëŒ€í‘œ ë©”ë‰´ (ì˜ˆìƒ)</h5>
                        <div class="menu-list">
                            ${sampleMenu.map(item => `
                                <div class="menu-item">
                                    <span>${item.item}</span>
                                    <span>â‚©${item.price.toLocaleString()}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            // ë¦¬ë·° ì •ë³´
            if (details.reviews && details.reviews.length > 0) {
                reviewsHtml = `
                    <div class="mt-3">
                        <h5 class="font-semibold mb-2">ìµœê·¼ ë¦¬ë·°</h5>
                        ${details.reviews.slice(0, 2).map(review => `
                            <div class="text-sm mb-2">
                                <div class="rating">${'â˜…'.repeat(review.rating)}${'â˜†'.repeat(5-review.rating)} ${review.author_name}</div>
                                <p class="text-gray-600">${review.text.substring(0, 100)}...</p>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
        }
        
        const infoWindow = new google.maps.InfoWindow({
            content: `
                <div class="info-window">
                    <h4>${place.name}</h4>
                    <div class="rating">
                        <span class="rating-stars">${'â˜…'.repeat(Math.floor(place.rating))}</span>
                        <span>${place.rating}/5.0 (${place.user_ratings_total || 0} ë¦¬ë·°)</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">ì˜ˆìƒ ë¹„ìš©: â‚©${cost.toLocaleString()}</p>
                    ${menuHtml}
                    ${reviewsHtml}
                    <button class="btn-add-itinerary" onclick="addToItinerary('${place.place_id}', '${place.name.replace(/'/g, "\\'")}', ${cost}, '${type}', ${place.geometry.location.lat()}, ${place.geometry.location.lng()})">
                        ì¼ì •ì— ì¶”ê°€
                    </button>
                </div>
            `
        });
        
        infoWindow.open(googleMap, marker);
        infoWindows.push(infoWindow);
    });
}

function generateSampleMenu(type, priceLevel) {
    const restaurantMenus = [
        {item: 'ëŒ€í‘œ ë©”ë‰´', price: 15000 * priceLevel},
        {item: 'ì¸ê¸° ìš”ë¦¬', price: 12000 * priceLevel},
        {item: 'íŠ¹ì„  ìš”ë¦¬', price: 18000 * priceLevel},
        {item: 'ì‚¬ì´ë“œ ë©”ë‰´', price: 8000 * priceLevel},
        {item: 'ìŒë£Œ', price: 3000 * priceLevel}
    ];
    
    const cafeMenus = [
        {item: 'ì•„ë©”ë¦¬ì¹´ë…¸', price: 4000 + (1000 * priceLevel)},
        {item: 'ì¹´í˜ë¼ë–¼', price: 5000 + (1000 * priceLevel)},
        {item: 'ë””ì €íŠ¸', price: 6000 + (2000 * priceLevel)},
        {item: 'ìƒŒë“œìœ„ì¹˜', price: 8000 + (2000 * priceLevel)},
        {item: 'ìŠ¤ë¬´ë””', price: 6000 + (1500 * priceLevel)}
    ];
    
    return type === 'restaurant' ? restaurantMenus : cafeMenus;
}

function estimateDynamicCost(types, category) {
    const baseCosts = {
        'restaurant': 80000,
        'cafe': 35000,
        'tourist_attraction': 25000,
        'beach': 5000,
        'shopping': 40000,
        'activity': 60000
    };
    
    const variation = Math.random() * 0.5 + 0.75; // 0.75 ~ 1.25
    return Math.floor((baseCosts[category] || 30000) * variation / 1000) * 1000;
}

function addToItinerary(placeId, name, cost, type, lat, lng) {
    alert(`${name}ì´(ê°€) ê´€ì‹¬ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!\nì›í•˜ëŠ” ì‹œê°„ëŒ€ì˜ ì˜µì…˜ì„ í´ë¦­í•˜ì—¬ ì¼ì •ì— í¬í•¨ì‹œì¼œì£¼ì„¸ìš”.`);
}

function clearThemeMarkers() {
    themeMarkers.forEach(marker => marker.setMap(null));
    themeMarkers = [];
    infoWindows.forEach(infoWindow => infoWindow.close());
    infoWindows = [];
}

// ë¦¬ì…‹ ê¸°ëŠ¥
function resetToOriginal() {
    if (confirm('ì›ë˜ ê³„íšëœ ì¼ì •ìœ¼ë¡œ ë˜ëŒë¦¬ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        selections = JSON.parse(JSON.stringify(originalSelections));
        
        // UI ì—…ë°ì´íŠ¸
        document.querySelectorAll('.option-card').forEach(card => {
            card.classList.remove('selected');
        });
        
        // ë©”ë‰´ íŒ¨ë„ ì œê±°
        document.querySelectorAll('.menu-panel').forEach(panel => {
            panel.remove();
        });
        
        // ê¸°ë³¸ ì„ íƒ ë³µì›
        Object.keys(originalSelections).forEach(day => {
            Object.keys(originalSelections[day]).forEach(time => {
                const selection = originalSelections[day][time];
                const card = document.querySelector(`.option-card[data-day="${day}"][data-time="${time}"][data-id="${selection.id}"]`);
                if (card) {
                    card.classList.add('selected');
                }
            });
        });
        
        if (isThemeSearchActive) {
            toggleThemeSearch();
        }
        
        updateAllDisplays();
    }
}

// ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
function updateAllDisplays() {
    updateCostDisplay();
    updateSelectedItemsDisplay();
    updateMapForDay(activeDay);
}

function updateCostDisplay() {
    const costs = { food: 0, activity: 0, etc: 0 };
    
    Object.values(selections).forEach(daySels => {
        if (daySels) {
            Object.values(daySels).forEach(sel => {
                if (sel && sel.type !== 'accommodation' && costs.hasOwnProperty(sel.type)) {
                    costs[sel.type] += sel.cost;
                }
            });
        }
    });
    
    // í™”ë©´ì— í‘œì‹œ
    Object.keys(costs).forEach(key => {
        const element = document.getElementById(`cost-${key}`);
        if (element) {
            element.textContent = `â‚©${costs[key].toLocaleString()}`;
        }
    });
    
    const localTotal = Object.values(costs).reduce((a, b) => a + b, 0);
    const total = localTotal + fixedCosts.flight + fixedCosts.hotel;
    
    const totalElement = document.getElementById('total-cost');
    if (totalElement) {
        totalElement.textContent = `â‚©${total.toLocaleString()}`;
    }
}

function updateSelectedItemsDisplay() {
    const container = document.getElementById('selected-items-container');
    const daySelections = selections[activeDay] || {};
    const sortedTimes = Object.keys(daySelections).sort();

    if (sortedTimes.length === 0) {
        container.innerHTML = '<p class="text-center text-gray-500 py-6">ì„ íƒëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
        return;
    }
    
    container.innerHTML = `
        <div class="space-y-3">
            ${sortedTimes.map(time => {
                const sel = daySelections[time];
                if (sel && sel.type !== 'accommodation') {
                    return `
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <span class="text-sm font-bold text-blue-600 w-12">${time}</span>
                                <span class="text-gray-800 font-medium">${sel.name}</span>
                            </div>
                            <span class="text-sm font-bold text-gray-800">â‚©${sel.cost.toLocaleString()}</span>
                        </div>
                    `;
                }
                return '';
            }).join('')}
        </div>
    `;
}

function updateMapForDay(day) {
    if (!googleMap || !directionsRenderer) return;
    
    const daySelections = Object.values(selections[day] || {}).filter(s => s && s.lat && s.lng);
    
    // ì‹œê°„ìˆœ ì •ë ¬
    daySelections.sort((a, b) => {
        const timeA = Object.keys(selections[day]).find(key => selections[day][key] && selections[day][key].id === a.id);
        const timeB = Object.keys(selections[day]).find(key => selections[day][key] && selections[day][key].id === b.id);
        if (!timeA || !timeB) return 0;
        return timeA.localeCompare(timeB);
    });

    // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
    directionsRenderer.setDirections({routes: []});
    if (window.dayMarkers) {
        window.dayMarkers.forEach(m => m.setMap(null));
    }
    window.dayMarkers = [];

    if (daySelections.length === 0) return;

    const bounds = new google.maps.LatLngBounds();
    
    // ë§ˆì»¤ ìƒì„± (ë²ˆí˜¸ ë§¤ì¹­)
    daySelections.forEach((sel, index) => {
        const pos = { lat: sel.lat, lng: sel.lng };
        bounds.extend(pos);
        
        const marker = new google.maps.Marker({
            position: pos,
            map: googleMap,
            label: {
                text: `${index + 1}`,
                color: 'white',
                fontWeight: 'bold',
                fontSize: '14px'
            },
            icon: {
                path: google.maps.SymbolPath.CIRCLE,
                scale: 20,
                fillColor: '#4f46e5',
                fillOpacity: 1,
                strokeColor: 'white',
                strokeWeight: 3
            },
            title: sel.name,
            zIndex: 1000 + index
        });
        
        window.dayMarkers = window.dayMarkers || [];
        window.dayMarkers.push(marker);
    });

    // ê²½ë¡œ ê·¸ë¦¬ê¸°
    if (daySelections.length > 1) {
        const request = {
            origin: { lat: daySelections[0].lat, lng: daySelections[0].lng },
            destination: { lat: daySelections[daySelections.length - 1].lat, lng: daySelections[daySelections.length - 1].lng },
            waypoints: daySelections.slice(1, -1).map(s => ({ location: { lat: s.lat, lng: s.lng } })),
            travelMode: google.maps.TravelMode.DRIVING
        };
        
        directionsService.route(request, (result, status) => {
            if (status === 'OK') {
                directionsRenderer.setDirections(result);
            }
        });
    }
    
    // ì§€ë„ ë²”ìœ„ ì¡°ì •
    if (userLocationMarker) {
        bounds.extend(userLocationMarker.getPosition());
    }
    
    googleMap.fitBounds(bounds);
    if (daySelections.length === 1 && !userLocationMarker) {
        googleMap.setZoom(14);
    }
}

// GPS ë„¤ë¹„ ê¸°ëŠ¥
function toggleNaviMode() {
    const toggleButton = document.getElementById('navi-mode-toggle');
    isNaviModeActive = !isNaviModeActive;

    if (isNaviModeActive) {
        if (navigator.geolocation) {
            toggleButton.innerHTML = '<i class="loading-spinner"></i>GPS ì—°ê²° ì¤‘...';
            
            watchId = navigator.geolocation.watchPosition(
                handleLocationUpdate,
                handleLocationError,
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 30000
                }
            );
        } else {
            alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            isNaviModeActive = false;
        }
    } else {
        if (watchId !== null) {
            navigator.geolocation.clearWatch(watchId);
        }
        watchId = null;
        
        if (userLocationMarker) {
            userLocationMarker.setMap(null);
            userLocationMarker = null;
        }
        
        toggleButton.innerHTML = '<i class="fas fa-location-arrow mr-2"></i>Live GPS';
        document.querySelectorAll('.distance-info').forEach(el => el.innerHTML = '');
    }
}

function handleLocationUpdate(position) {
    const userLocation = { lat: position.coords.latitude, lng: position.coords.longitude };
    const toggleButton = document.getElementById('navi-mode-toggle');
    toggleButton.innerHTML = '<i class="fas fa-location-arrow mr-2"></i>GPS ì—°ê²°ë¨';
    toggleButton.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';

    if (!userLocationMarker) {
        userLocationMarker = new google.maps.Marker({
            position: userLocation,
            map: googleMap,
            icon: {
                path: google.maps.SymbolPath.CIRCLE,
                scale: 12,
                fillColor: '#4285F4',
                fillOpacity: 1,
                strokeColor: 'white',
                strokeWeight: 3
            },
            title: "í˜„ì¬ ë‚´ ìœ„ì¹˜",
            zIndex: 2000
        });
    } else {
        userLocationMarker.setPosition(userLocation);
    }
    
    updateDistances(userLocation);
}

function handleLocationError(error) {
    alert(`ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${error.message}`);
    toggleNaviMode();
}

function updateDistances(userLocation) {
    const daySelections = selections[activeDay] || {};
    const sortedTimes = Object.keys(daySelections).sort();
    
    if (sortedTimes.length > 0) {
        const nextTime = sortedTimes[0];
        const nextDestination = daySelections[nextTime];
        
        if (nextDestination) {
            const request = {
                origin: userLocation,
                destination: { lat: nextDestination.lat, lng: nextDestination.lng },
                travelMode: google.maps.TravelMode.DRIVING
            };

            directionsService.route(request, (result, status) => {
                if (status === 'OK') {
                    const leg = result.routes[0].legs[0];
                    const distanceInfoEl = document.querySelector(`.distance-info[data-day="${activeDay}"][data-time="${nextTime}"]`);
                    if (distanceInfoEl) {
                        distanceInfoEl.innerHTML = `ğŸ“ ${leg.distance.text} â€¢ ${leg.duration.text}`;
                    }
                }
            });
        }
    }
}

function openInGoogleMaps() {
    const daySels = Object.values(selections[activeDay] || {}).filter(s => s && s.lat);
    if (daySels.length < 1) {
        alert("ë¨¼ì € ì¥ì†Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");
        return;
    }
    
    let url = 'https://www.google.com/maps/dir/';
    if (userLocationMarker) {
        const pos = userLocationMarker.getPosition();
        url += `${pos.lat()},${pos.lng()}/`;
    }
    daySels.forEach(sel => {
        url += `${sel.lat},${sel.lng}/`;
    });
    window.open(url, '_blank');
}

// ìœˆë„ìš° ë¡œë“œ ì´ë²¤íŠ¸
window.addEventListener('load', () => {
    if (typeof google === 'undefined') {
        setTimeout(initApp, 1000);
    }
});
</script>
</body>
</html>
ì´ì½”ë“œê¸°ì¤€ì—ì„œ ì—…ë°ì´íŠ¸í•´ ê¸°ì¡´ê¸°ëŠ¥. ë²„ë¦¬ì§€ë§ˆ
ê·¸ì™¸ì— ì œëª©ë§Œë„£ê³  ì§€ë„ëŠ”ìƒë‹¨ì— í”Œë¡œíŒ… 
ì´ì „ìš”ì²­ì‚¬í•­. ëª¨ë‘ ì¬ê²€í† í•´
í¬ì¸íŠ¸ ë‚­ë¹„í•œê±°ê°™ë‹¤